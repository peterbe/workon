{"version":3,"sources":["vendored/get-urls.js","vendored/url-regex.js","EditModal.js","Common.js","Config.js","Store.js","TodoList.js","TimeLine.js","Auth.js","Settings.js","SyncLog.js","App.js","serviceWorker.js","index.js"],"names":["URL","require","urlRegex","normalizeUrl","getUrlsFromQueryParams","url","ret","Set","qs","parse","query","_arr","Object","keys","_i","length","value","exact","test","add","module","exports","text","options","trim","replace","urls","match","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","extractFromQueryString","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","err","return","ipRegex","tlds","opts","assign","strict","protocol","concat","ip","v4","source","tld","sort","a","b","join","regex","RegExp","DisplayDate","date","Error","dateObj","toDate","now","Date","react_default","createElement","title","toString","formatDistance","addSuffix","getItemUrls","item","getUrls","notes","stripHash","values","Array","from","EditModal","state","saveDisabled","advancedMode","_this","props","newContext","_escapeKey","event","defaultPrevented","key","close","itemFormSubmit","preventDefault","itemFormSave","refs","edit","delete","onChangeContext","context","setState","this","focus","window","addEventListener","removeEventListener","_this2","className","onClick","style","margin","marginBottom","type","index_es","icon","faUndo","faCheck","onSubmit","ref","onChange","defaultValue","EditModal_EditContextDropdown","contextOptions","allContextOptions","currentContext","placeholder","map","href","target","rel","marginLeft","display","marginTop","disabled","created","modified","React","Component","EditContextDropdown","opened","addNew","formSubmit","_this3","newcontext","_this4","_this$props","aria-haspopup","aria-controls","wasOpen","faAngleUp","faAngleDown","id","role","name","count","onBlur","console","log","PureComponent","ContextTag","_ref","OIDC_CLIENT_ID","process","REACT_APP_OIDC_CLIENT_ID","OIDC_DOMAIN","REACT_APP_OIDC_DOMAIN","defaultCallbackUrl","location","host","OIDC_CALLBACK_URL","REACT_APP_OIDC_CALLBACK_URL","OIDC_AUDIENCE","REACT_APP_OIDC_AUDIENCE","TodoStore","rootStore","classCallCheck","db","Kinto","adapterOptions","migrateOldData","collection","extendObservable","items","deletedItem","editItem","cleanSlateDate","accessToken","contextFilter","syncLog","error","lastSuccess","lastFailure","syncLogs","obtain","action","list","order","then","res","data","keepSyncing","periodicSyncTimer","setTimeout","lastAnything","getTime","sync","warn","lastModifiedSync","syncOptions","remote","headers","Authorization","lastModified","ok","_date","push","slice","conflicts","Promise","all","conflict","resolve","catch","message","includes","resetSyncStatus","_","alert","reload","code","selfDestruct","clear","deleteItem","updateItem","thisItemIndex","findIndex","i","thisItem","update","cleanBeforeUpdating","addItem","create","unshift","importItem","deleted","doneItem","togglePinnedItem","pinned","plain","toJS","last_modified","cleanSlate","forEach","hidden","undoCleanSlate","entries","_ref2","slicedToArray","UserStore","userInfo","serverError","store","RootStore","user","todos","SOUNDS","coin","bump","ping","smash","dead","jump","observer","_React$Component","TodoList","_getPrototypeOf2","_len","arguments","args","_key","possibleConstructorReturn","getPrototypeOf","call","apply","hideDone","JSON","localStorage","getItem","showPyros","startInAdvancedMode","_sounds","_loadSound","load","audioBuffer","playSound","play","new","showPyrosTemporarily","mseconds","dismounted","wasNotDone","giveupUndoTimeout","clearTimeout","undoDelete","even","toggleEditItem","toggleHideDone","setItem","stringify","inherits","createClass","sessionStorage","document","reg","hash","found","decodeURIComponent","allContexts","","allContextKeys","filter","visibleItems","showItems","countDone","countAll","countVisible","allDates","EditModal_EditModal","react_transition_group","timeout","classNames","TodoList_Item","editItemText","setEditItem","TodoList_ShowSyncLog","ShowSyncLog","_React$Component2","_getPrototypeOf3","_len2","_key2","subRender","react_router_dom","to","Item","_React$Component3","_getPrototypeOf4","_len3","_key3","displayMetadata","editMode","newText","toggleEditMode","handleTextEdit","_swipe","minSwipeDistance","handleTouchStart","touch","touches","x","clientX","y","clientY","textcontainer","handleTouchMove","changedTouches","diffX","diffY","engaged","Math","abs","swiping","classList","remove","handleTouchEnd","absX","_this5","createdDateObj","modifiedDateObj","itemClassName","TodoList_FriendlyDateTag","datetime","PinItemTag","toggle","Common_ContextTag","cursor","onTouchStart","onTouchMove","onTouchEnd","FriendlyDateTag","isSameDay","subDays","formatDistanceStrict","startOfDay","TimeLine","doneItems","groups","reverse","dates","d","parseInt","previousMonth","month","startOfMonth","monthHeader","isEqual","format","FriendlyDate","Auth","pageTitle","ShowServerError","textAlign","logOut","logIn","email","status","Settings","getVersionData","element","querySelector","dataset","DeleteItAll","commit","_React$useState","useState","_React$useState2","confirm","setConfirm","SyncLog","ListAll","memo","SyncLog_Log","first","Log","expand","preStyle","fontSize","maxHeight","borderBottom","paddingTop","borderTop","windExpires","hours","e","expiresAt","NoMatch","pathname","App","loading","_postProcessAuthResult","authResult","idTokenPayload","expiresIn","accessTokenRefreshLoop","age","webAuth","checkSession","authorize","removeItem","rootUrl","logout","returnTo","clientID","stopLoadingTimer","authenticate","pullToRefresh","destroyAll","auth0","WebAuth","domain","redirectUri","audience","responseType","scope","parseHash","startAccessTokenRefreshLoop","LoadingOverlay_default","active","spinner","background","color","spinnerSize","src","picture","alt","react_router","path","component","render","src_Auth","aria-label","AuthLinkText","data-badge","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","src_App_0","getElementById","origin","fetch","response","contentType","get","indexOf","ready","unregister","checkValidServiceWorker","toast","dismissible","closeOnClick","pauseOnHover","duration"],"mappings":"6EAAA,IAAMA,EAAMC,EAAQ,KACdC,EAAWD,EAAQ,KACnBE,EAAeF,EAAQ,KAE7B,SAASG,EAAuBC,GAM9B,IALA,IAAMC,EAAM,IAAIC,IAGVC,EAAKR,EAAIS,MAAMJ,GAAK,GAAMK,MAJGC,EAMjBC,OAAOC,KAAKL,GAA9BM,EAAA,EAAAA,EAAAH,EAAAI,OAAAD,IAAmC,CAA9B,IACGE,EAAQR,EADFG,EAAAG,IAERZ,EAAS,CAAEe,OAAO,IAAQC,KAAKF,IACjCV,EAAIa,IAAIH,GAIZ,OAAOV,EAGTc,EAAOC,QAAU,SAACC,EAAMC,GACtBA,EAAUA,GAAW,GAErB,IAAMjB,EAAM,IAAIC,IAEVY,EAAM,SAAAd,GACVC,EAAIa,IAAIhB,EAAaE,EAAImB,OAAOC,QAAQ,OAAQ,IAAKF,KAGjDG,EAAOJ,EAAKK,MAAMzB,MAAe,GATL0B,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAUlC,QAAAC,EAAAC,EAAkBP,EAAlBQ,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAwB,KAAbvB,EAAa2B,EAAAhB,MAGtB,GAFAG,EAAId,GAEAkB,EAAQe,uBAAwB,KAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAV,EAAA,IAClC,QAAAW,EAAAC,EAAoBvC,EAAuBC,GAA3C6B,OAAAC,cAAAI,GAAAG,EAAAC,EAAAP,QAAAC,MAAAE,GAAA,EAAiD,CAC/CpB,EAD+CuB,EAAA1B,QADf,MAAA4B,GAAAJ,GAAA,EAAAC,EAAAG,EAAA,YAAAL,GAAA,MAAAI,EAAAE,QAAAF,EAAAE,SAAA,WAAAL,EAAA,MAAAC,MAbJ,MAAAG,GAAAf,GAAA,EAAAC,EAAAc,EAAA,YAAAhB,GAAA,MAAAK,EAAAY,QAAAZ,EAAAY,SAAA,WAAAhB,EAAA,MAAAC,GAoBlC,OAAOxB,0GCxCT,IAAMwC,EAAU7C,EAAQ,KAClB8C,EAAO9C,EAAQ,KAErBmB,EAAOC,QAAU,SAAA2B,GAChBA,EAAOpC,OAAOqC,OAAO,CAACC,QAAQ,GAAOF,GAErC,IAAMG,EAAQ,qBAAAC,OAAwBJ,EAAKE,OAAS,GAAK,KAEnDG,EAAKP,EAAQQ,KAAKC,OAGlBC,EAAG,SAAAJ,OAAYJ,EAAKE,OAAS,+BAAd,MAAAE,OAAqDL,EAAKU,KAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAE5C,OAAS2C,EAAE3C,SAAQ6C,KAAK,KAAnG,KAAZ,SAGHC,EAAK,MAAAT,OAASD,EAAT,YAAAC,OAPE,uBAOF,iBAAAA,OAAgDC,EAAhD,KAAAD,OALE,8DAKFA,OAJI,kEAIJA,OAAsEI,EAAtE,KAAAJ,OAFE,kBAEFA,OADE,sBAGb,OAAOJ,EAAK/B,MAAQ,IAAI6C,OAAJ,OAAAV,OAAkBS,EAAlB,MAA6B,KAAO,IAAIC,OAAOD,EAAO,qXCLrEE,EAAc,SAAAC,GAClB,GAAa,OAATA,EACF,MAAM,IAAIC,MAAM,gBAElB,IAAMC,EAAUC,YAAOH,GACjBI,EAAM,IAAIC,KAChB,OACEC,EAAAZ,EAAAa,cAAA,QAAMC,MAAON,EAAQO,YAClBC,YAAeV,EAAMI,EAAK,CAAEO,WAAW,MAKxCC,EAAc,SAAAC,GAClB,IAAMnD,EAAOoD,IAAQD,EAAKvD,MADAM,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAE1B,QAAAC,EAAAC,EAAgB6C,IAAQD,EAAKE,OAAS,GAAI,CACxCC,WAAW,IACVC,SAFH/C,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAEa,KAFJvB,EAEI2B,EAAAhB,MACXU,EAAKP,IAAId,IALe,MAAAuC,GAAAf,GAAA,EAAAC,EAAAc,EAAA,YAAAhB,GAAA,MAAAK,EAAAY,QAAAZ,EAAAY,SAAA,WAAAhB,EAAA,MAAAC,GAO1B,OAAOoD,MAAMC,KAAKzD,IAGC0D,6MACnBC,MAAQ,CACNC,cAAc,EACdC,cAAc,EACd7D,KAAMkD,EAAYY,EAAKC,MAAMZ,MAC7Ba,WAAY,QAWdC,WAAa,SAAAC,GACPA,EAAMC,kBAGQ,WAAdD,EAAME,KACRN,EAAKC,MAAMM,WAIfC,eAAiB,SAAAJ,GACfA,EAAMK,iBACNT,EAAKU,kBAGPA,aAAe,WACb,IAAM5E,EAAOkE,EAAKW,KAAK7E,KAAKN,MAAMQ,OAC5BuD,EACHS,EAAKH,MAAME,cAAgBC,EAAKW,KAAKpB,MAAM/D,MAAMQ,QAAW,KAC3DF,GACFkE,EAAKC,MAAMW,KAAKZ,EAAKC,MAAMZ,KAAMvD,EAAMyD,EAAOS,EAAKH,MAAMK,YACzDF,EAAKC,MAAMM,UAEXP,EAAKC,MAAMY,OAAOb,EAAKC,MAAMZ,MAC7BW,EAAKC,MAAMM,YAIfO,gBAAkB,SAAAC,GAChBf,EAAKgB,SAAS,CAAEd,WAAYa,GAAW,WACrCf,EAAKU,qGApCPO,KAAKN,KAAK7E,KAAKoF,QACfC,OAAOC,iBAAiB,UAAWH,KAAKd,YAAY,kDAGpDgB,OAAOE,oBAAoB,UAAWJ,KAAKd,YAAY,oCAoChD,IAAAmB,EAAAL,KACC5B,EAAS4B,KAAKhB,MAAdZ,KACR,OACEP,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,mBACbzC,EAAAZ,EAAAa,cAAA,OACEwC,UAAU,mBACVC,QAAS,WACPF,EAAKrB,MAAMM,WAIfzB,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,iBACbzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,MAAME,MAAO,CAAEC,OAAQ,IACpC5C,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,kBAAkBE,MAAO,CAAEE,aAAc,KACtD7C,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,gCACbzC,EAAAZ,EAAAa,cAAA,UACE6C,KAAK,SACLL,UACElC,EAAKxC,KAAO,oBAAsB,oBAEpC2E,QAAS,WACPF,EAAKrB,MAAMpD,KAAKwC,KAMlBP,EAAAZ,EAAAa,cAAC8C,EAAA,EAAD,CAAiBC,KAAMzC,EAAKxC,KAAOkF,IAASC,MAAY,IACvD3C,EAAKxC,KAAO,UAAY,UAG7BiC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,gCACbzC,EAAAZ,EAAAa,cAAA,UACE6C,KAAK,SACLL,UAAU,iBACVC,QAAS,WACPF,EAAKN,SAAS,CAAEjB,cAAeuB,EAAKzB,MAAME,iBAG3CkB,KAAKpB,MAAME,aAAe,QAAU,UAGzCjB,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,gCACbzC,EAAAZ,EAAAa,cAAA,UACE6C,KAAK,SACLL,UAAU,mBACVC,QAAS,WACPF,EAAKrB,MAAMY,OAAOxB,KAJtB,YAYJP,EAAAZ,EAAAa,cAAA,QAAMkD,SAAUhB,KAAKT,gBACnB1B,EAAAZ,EAAAa,cAAA,SACEwC,UAAU,kBACVK,KAAK,OACLM,IAAI,OACJT,MAAO,CAAEE,aAAc,GACvBQ,SAAU,WACJb,EAAKzB,MAAMC,cACbwB,EAAKN,SAAS,CAAElB,cAAc,KAGlCsC,aAAc/C,EAAKvD,QAGtBmF,KAAKpB,MAAME,cACVjB,EAAAZ,EAAAa,cAACsD,EAAD,CACEvB,gBAAiBG,KAAKH,gBACtBwB,eAAgBrB,KAAKhB,MAAMsC,kBAC3BC,eAAgBnD,EAAK0B,QAAU1B,EAAK0B,QAAU,KAGjDE,KAAKpB,MAAME,aACVjB,EAAAZ,EAAAa,cAAA,QAAMkD,SAAUhB,KAAKT,gBACnB1B,EAAAZ,EAAAa,cAAA,YACEmD,IAAI,QACJX,UAAU,WACVkB,YAAY,WACZL,aAAc/C,EAAKE,OAAS,GAC5B4C,SAAU,WACJb,EAAKzB,MAAMC,cACbwB,EAAKN,SAAS,CAAElB,cAAc,QAKpC,KAEHmB,KAAKpB,MAAME,cAAgBkB,KAAKpB,MAAM3D,KAAKX,OAC1CuD,EAAAZ,EAAAa,cAAA,SACED,EAAAZ,EAAAa,cAAA,kBACCkC,KAAKpB,MAAM3D,KAAKwG,IAAI,SAAA7H,GAAG,OACtBiE,EAAAZ,EAAAa,cAAA,KACEuB,IAAKzF,EACL8H,KAAM9H,EACN+H,OAAO,SACPC,IAAI,sBACJpB,MAAO,CACLqB,WAAY,GACZC,QAASzB,EAAKzB,MAAM3D,KAAKX,OAAS,EAAI,QAAU,WAGjDV,MAIL,KAGHoG,KAAKpB,MAAM3D,KAAKX,OAASuD,EAAAZ,EAAAa,cAAA,WAAS,KAEnCD,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,kBAAkBE,MAAO,CAAEuB,UAAW,KACnDlE,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,cACbzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,4BACbzC,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,oBACVC,QAASP,KAAKT,eACdyC,SAAUhC,KAAKpB,MAAMC,cAHvB,UASJhB,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,eACbzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,6BACbzC,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,SACVC,QAAS,SAAApB,GACPkB,EAAKrB,MAAMM,UAHf,aAYLU,KAAKpB,MAAME,aACVjB,EAAAZ,EAAAa,cAAA,KAAGwC,UAAU,aACVlC,EAAK6D,UAAY7D,EAAK8D,SACrBrE,EAAAZ,EAAAa,cAAA,YACED,EAAAZ,EAAAa,cAAA,oBADF,IACkBR,EAAYc,EAAK8D,WAGnCrE,EAAAZ,EAAAa,cAAA,YACED,EAAAZ,EAAAa,cAAA,mBADF,IACiBR,EAAYc,EAAK6D,WAIpC,eA1MuBE,IAAMC,WAkNvCC,6MACJzD,MAAQ,CACN0D,QAAQ,EACRC,QAAQ,KAEVC,WAAa,SAAArD,GACXA,EAAMK,iBACN,IAAMP,EAAawD,EAAK/C,KAAKgD,WAAWnI,MAAMQ,OAC9C0H,EAAKzD,MAAMa,gBAAgBZ,4EAEpB,IAAA0D,EAAA3C,KAAA4C,EACqD5C,KAAKhB,MAAzDqC,EADDuB,EACCvB,eAAgBE,EADjBqB,EACiBrB,eAAgB1B,EADjC+C,EACiC/C,gBACxC,OACEhC,EAAAZ,EAAAa,cAAA,QAAMkD,SAAUhB,KAAKwC,WAAYhC,MAAO,CAAEE,aAAc,IACtD7C,EAAAZ,EAAAa,cAAA,OAAKwC,UAAWN,KAAKpB,MAAM0D,OAAS,qBAAuB,YACzDzE,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,oBACbzC,EAAAZ,EAAAa,cAAA,UACE6C,KAAK,SACLL,UAAU,SACVuC,gBAAc,OACdC,gBAAc,gBACdvC,QAAS,SAAApB,GACPA,EAAMK,iBACN,IAAMuD,IAAYJ,EAAK/D,MAAM0D,OAC7BK,EAAK5C,SAAS,CAAEuC,QAASK,EAAK/D,MAAM0D,QAAU,WACxCS,GAAWJ,EAAK/D,MAAM2D,QACxBI,EAAK5C,SAAS,CAAEwC,QAAQ,QAK9B1E,EAAAZ,EAAAa,cAAA,YACGkC,KAAKpB,MAAM0D,OAAS,QAAU,+BAEjCzE,EAAAZ,EAAAa,cAAC8C,EAAA,EAAD,CACEC,KAAMb,KAAKpB,MAAM0D,OAASU,IAAYC,IACtCzC,MAAO,CAAEqB,WAAY,QAI3BhE,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,gBAAgB4C,GAAG,gBAAgBC,KAAK,QACrDtF,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,oBACZe,EAAeI,IAAI,SAAA3B,GAClB,OACEjC,EAAAZ,EAAAa,cAAA,KACEuB,IAAKS,EAAQsD,KACb1B,KAAK,IACLpB,UACEiB,IAAmBzB,EAAQsD,KACvB,0BACA,gBAEN7C,QAAS,SAAApB,GACPA,EAAMK,iBACNK,EAAgBC,EAAQsD,QAGzBtD,EAAQsD,KACPvF,EAAAZ,EAAAa,cAAA,YACGgC,EAAQsD,KADX,KACmBtD,EAAQuD,MAD3B,KAIAxF,EAAAZ,EAAAa,cAAA,qBAAagC,EAAQuD,MAArB,QAMRxF,EAAAZ,EAAAa,cAAA,MAAIwC,UAAU,qBACZN,KAAKpB,MAAM2D,OAcX1E,EAAAZ,EAAAa,cAAA,SACE6C,KAAK,OACLM,IAAI,aACJX,UAAU,QACVkB,YAAY,sBACZN,SAAU,SAAA/B,GACRA,EAAMK,kBAER8D,OAAQ,SAAAnE,GACNoE,QAAQC,IAAI,wBAtBhB3F,EAAAZ,EAAAa,cAAA,KACE4D,KAAK,IACLpB,UAAU,gBACVC,QAAS,SAAApB,GACPA,EAAMK,iBACNmD,EAAK5C,SAAS,CAAEwC,QAAQ,GAAQ,WAC9BI,EAAKjD,KAAKgD,WAAWzC,YAN3B,mCAtEkBkC,IAAMsB,eClP3BC,EAAa,SAAAC,GAA0B,IAAvB7D,EAAuB6D,EAAvB7D,QAASS,EAAcoD,EAAdpD,QACpC,OAAKT,EAIHjC,EAAAZ,EAAAa,cAAA,QAAMyC,QAASA,EAASD,UAAU,+BAC/BR,GAJI,qBCHE8D,EACXC,gGAAYC,0BAA4B,mCAC7BC,EACXF,gGAAYG,uBAAyB,uBACjCC,EAAkB,GAAAtH,OAAMuD,OAAOgE,SAASxH,SAAtB,MAAAC,OACtBuD,OAAOgE,SAASC,KADM,KAGXC,EACXP,gGAAYQ,6BAA+BJ,EAChCK,EACXT,gGAAYU,yBAAZ,WAAA5H,OAAkDoH,EAAlD,+BCEIS,EACJ,SAAAA,EAAYC,GAAW,IAAA1F,EAAAiB,KAAA7F,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAAwE,GACrBxE,KAAKyE,UAAYA,EAGjBzE,KAAK2E,GAAK,IAAIC,IAAM,CAClBC,eAAgB,CAEdC,gBAAgB,KAGpB9E,KAAK+E,WAAa/E,KAAK2E,GAAGI,WAAW,SAErCC,YAAiBhF,KAAM,CACrBiF,MAAO,GACPC,YAAa,KACbC,SAAU,KACVC,eAAgB,KAChBC,YAAa,KACbC,cAAe,KACfC,QAAS,CACPC,MAAO,KACPC,YAAa,KACbC,YAAa,MAEfC,SAAU,GACVC,OAAQC,YAAO,WACb,OAAO9G,EAAKgG,WAAWe,KAAK,CAAEC,MAAO,aAAcC,KAAK,SAAAC,GACtDlH,EAAKkG,MAAQgB,EAAIC,SAGrBC,YAAaN,YAAO,WAClB9G,EAAKqH,kBAAoBC,WAAW,WAClC,IAAIC,EAAe,EACfvH,EAAKwG,QAAQG,cACfY,EAAevH,EAAKwG,QAAQG,aAG5B3G,EAAKwG,QAAQE,aACb1G,EAAKwG,QAAQE,YAAca,IAE3BA,EAAevH,EAAKwG,QAAQE,cAEV,IAAI7H,MAAO2I,UAAYD,EAhDxB,IAmDjBvH,EAAKyH,OAELjD,QAAQkD,KACN,wDAGJ1H,EAAKoH,eAxDkB,OA2D3BO,iBAAkB,KAClBF,KAAMX,YAAO,WACX,GAAK9G,EAAKsG,YAAV,CAIA,IAAMsB,EAAc,CAClBC,OD7De/C,8BC8DfgD,QAAS,CACPC,cAAa,UAAAnK,OAAYoC,EAAKsG,eAIlCtG,EAAKgG,WACFyB,KAAKG,GACLX,KAAK,SAAAE,GAqBJ,GApBIA,EAAKa,eAAiBhI,EAAK2H,mBAC7B3H,EAAK6G,SACL7G,EAAK2H,iBAAmBR,EAAKa,cAG3Bb,EAAKc,GACPjI,EAAKwG,QAAQE,aAAc,IAAI7H,MAAO2I,UAEtCxH,EAAKwG,QAAQG,aAAc,IAAI9H,MAAO2I,UAExCL,EAAKe,MAAQ,IAAIrJ,KACjBmB,EAAK4G,SAASuB,KAAKhB,GACfnH,EAAK4G,SAASrL,QArFD,KAuFfyE,EAAK4G,SAAW5G,EAAK4G,SAASwB,MAC5BpI,EAAK4G,SAASrL,OAxFD,GAyFbyE,EAAK4G,SAASrL,SAId4L,EAAKkB,UAAU9M,OAEjB,OADAiJ,QAAQkD,KAAR,aAAA9J,OAA0BuJ,EAAKkB,UAAU9M,OAAzC,gBACO+M,QAAQC,IACbpB,EAAKkB,UAAU3F,IAAI,SAAA8F,GACjB,OAAOxI,EAAKgG,WAAWyC,QAAQD,EAAUA,EAASX,WAGnDZ,KAAK,WACJzC,QAAQC,IAAI,oCACZzE,EAAKgG,WACFyB,KAAKG,GACLX,KAAK,WACJzC,QAAQC,IACN,uDAGHiE,MAAM,SAAAtL,GACLoH,QAAQC,IAAI,sBAAuBrH,OAGxCsL,MAAM,SAAAtL,GAEL,MADAoH,QAAQkD,KAAK,2CAA4CtK,GACnDA,MAIbsL,MAAM,SAAAjC,GAEL,GADAjC,QAAQkD,KAAK,SAAUjB,GAErBA,EAAMkC,QAAQC,SACZ,6DAIF,MAAMnC,EAGR,GAAIA,EAAMkC,QAAQC,SAAS,WACzB,OAAO5I,EAAKgG,WAAW6C,kBAAkB5B,KAAK,SAAA6B,GAC5C9I,EAAKgG,WAAWyB,OAChBsB,MAAM,qDACN5H,OAAOgE,SAAS6D,WAGhBvC,EAAMU,MAAQV,EAAMU,KAAK8B,MAA4B,MAApBxC,EAAMU,KAAK8B,OAE9CjJ,EAAKsG,YAAc,MAErBtG,EAAKwG,QAAQC,MAAQA,EACrBzG,EAAKwG,QAAQG,aAAc,IAAI9H,MAAO2I,iBAlFxChD,QAAQkD,KAAK,qCAqFjBwB,aAAcpC,YAAO,WAEnB9G,EAAKgG,WACFmD,QACAlC,KAAK,WACJjH,EAAKkG,MAAQ,GACblG,EAAKoG,SAAW,KAChBpG,EAAKoJ,WAAa,KAClBpJ,EAAKyH,OACLsB,MAAM,oBAEPL,MAAM,SAAAtL,GACL,MAAMA,MAGZiM,WAAYvC,YAAO,SAACzH,EAAMvD,EAAMyD,EAAOwB,GACrC,IAAMuI,EAAgBtJ,EAAKkG,MAAMqD,UAAU,SAAAC,GAAC,OAAIA,EAAErF,KAAO9E,EAAK8E,KACxDsF,EAAWzJ,EAAKkG,MAAMoD,GAC5BG,EAAS3N,KAAOA,EAChB2N,EAASlK,MAAQA,EACjBkK,EAAS1I,QAAUA,EACnB0I,EAAStG,UAAW,IAAItE,MAAO2I,UAC/BxH,EAAKkG,MAAMoD,GAAiBG,EAC5BzJ,EAAKgG,WACF0D,OAAO1J,EAAK2J,oBAAoBF,IAChCf,MAAM,SAAAtL,GACL,MAAMA,IAEP6J,KAAK,WACJjH,EAAKyH,WAGXmC,QAAS9C,YAAO,SAAAhL,GACd,IAAM8C,EAAM,IAAIC,KACVQ,EAAO,CACXvD,OACAe,KAAM,KACNqG,QAAStE,EAAI4I,UACbrE,SAAUvE,EAAI4I,WAGhBxH,EAAKgG,WACF6D,OAAOxK,GACP4H,KAAK,SAAAC,GACJ7H,EAAK8E,GAAK+C,EAAIC,KAAKhD,GACnBnE,EAAKkG,MAAM4D,QAAQzK,GACnBW,EAAKyH,SAENiB,MAAM,SAAAtL,GACL,MAAMA,MAGZ2M,WAAYjD,YAAO,SAAAzH,GACjBW,EAAKgG,WACF6D,OAAOxK,GACP4H,KAAK,SAAAC,GACJ7H,EAAK8E,GAAK+C,EAAIC,KAAKhD,GACnBnE,EAAKkG,MAAM4D,QAAQzK,KAGpBqJ,MAAM,SAAAtL,GACL,MAAMA,MAGZgM,WAAYtC,YAAO,SAAAzH,GACjBW,EAAKoG,SAAW,KAChB,IAAMkD,EAAgBtJ,EAAKkG,MAAMqD,UAAU,SAAAC,GAAC,OAAIA,EAAErF,KAAO9E,EAAK8E,KACxDsF,EAAWzJ,EAAKkG,MAAMoD,GACxBG,EAASO,SACXP,EAASO,QAAU,KACnBhK,EAAKmG,YAAc,OAEnBsD,EAASO,SAAU,IAAInL,MAAO2I,UAC9BxH,EAAKmG,YAAc9G,GAErBW,EAAKgG,WACF0D,OAAO1J,EAAK2J,oBAAoBF,IAChCxC,KAAK,SAAAC,GACJlH,EAAKkG,MAAMoD,GAAiBG,EAC5BzJ,EAAKyH,SAENiB,MAAM,SAAAtL,GACL,MAAMA,MAGZ6M,SAAUnD,YAAO,SAAAzH,GACf,IAAMiK,EAAgBtJ,EAAKkG,MAAMqD,UAAU,SAAAC,GAAC,OAAIA,EAAErF,KAAO9E,EAAK8E,KACxDsF,EAAWzJ,EAAKkG,MAAMoD,GACxBG,EAAS5M,KACX4M,EAAS5M,KAAO,KAEhB4M,EAAS5M,MAAO,IAAIgC,MAAO2I,UAE7BxH,EAAKkG,MAAMoD,GAAiBG,EAC5BzJ,EAAKoG,SAAW,KAChBpG,EAAKgG,WACF0D,OAAO1J,EAAK2J,oBAAoBF,IAChCxC,KAAK,WACJjH,EAAKyH,SAENiB,MAAM,SAAAtL,GACL,MAAMA,MAGZ8M,iBAAkBpD,YAAO,SAAAzH,GACvB,IAAMiK,EAAgBtJ,EAAKkG,MAAMqD,UAAU,SAAAC,GAAC,OAAIA,EAAErF,KAAO9E,EAAK8E,KACxDsF,EAAWzJ,EAAKkG,MAAMoD,GACxBG,EAASU,OACXV,EAASU,OAAS,KAElBV,EAASU,QAAS,IAAItL,MAAO2I,UAE/BxH,EAAKkG,MAAMoD,GAAiBG,EAC5BzJ,EAAKgG,WACF0D,OAAO1J,EAAK2J,oBAAoBF,IAChCxC,KAAK,WACJjH,EAAKyH,SAENiB,MAAM,SAAAtL,GACL,MAAMA,MAGZuM,oBAAqB,SAAAtK,GACnB,IAAM+K,EAAQC,YAAKhL,GAInB,OAHI+K,EAAME,sBACDF,EAAME,cAERF,GAETG,WAAYzD,YAAO,WAEjB,IAAMlI,GAAM,IAAIC,MAAO2I,UACvBxH,EAAKkG,MAAMsE,QAAQ,SAAAnL,GACZA,EAAKoL,QAAWpL,EAAK8K,SACxB9K,EAAKoL,OAAS7L,EACdoB,EAAKgG,WACF0D,OAAO1J,EAAK2J,oBAAoBtK,IAChCqJ,MAAM,SAAAtL,GACL,MAAMA,OAId4C,EAAKqG,eAAiBzH,EACtBoB,EAAKyH,SAEPiD,eAAgB5D,YAAO,WACrB9G,EAAKkG,MAAMsE,QAAQ,SAAAnL,GAEfA,EAAKoL,SACHzK,EAAKqG,gBAAkBhH,EAAKoL,SAAWzK,EAAKqG,iBAC1CrG,EAAKqG,gBAAkBhH,EAAKoL,UAEhCpL,EAAKoL,OAAS,KACdzK,EAAKgG,WACF0D,OAAO1J,EAAK2J,oBAAoBtK,IAChCqJ,MAAM,SAAAtL,GACL,MAAMA,OAId4C,EAAKqG,eAAiB,KACtBrG,EAAKyH,SAEPlF,wBACE,IAAMgG,EAAM,GASZ,OARAtH,KAAKiF,MAAMsE,QAAQ,SAAAnL,GACjB,IAAM0B,EAAU1B,EAAK0B,QAAU1B,EAAK0B,QAAU,GACzCwH,EAAIxH,KACPwH,EAAIxH,GAAW,GAEjBwH,EAAIxH,OAGC3F,OAAOuP,QAAQpC,GACnB7F,IAAI,SAAAkC,GAAkB,IAAAgG,EAAAxP,OAAAyP,EAAA,EAAAzP,CAAAwJ,EAAA,GACrB,MAAO,CAAEP,KADYuG,EAAA,GACDtG,MADCsG,EAAA,MAGtB3M,KAAK,SAACC,EAAGC,GACR,OAAID,EAAEmG,KAAOlG,EAAEkG,KAAa,EACxBlG,EAAEkG,KAAOnG,EAAEmG,MAAc,EACtB,QAObyG,EACJ,SAAAA,EAAYpF,GAAYtK,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAA6J,GACtB7J,KAAKyE,UAAYA,EACjBO,YAAiBhF,KAAM,CACrB8J,SAAU,KACVC,YAAa,QAgBJC,EAHA9J,OAAO8J,MAAQ,IAP5B,SAAAC,IAAe9P,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAAiK,GACbjK,KAAKkK,KAAO,IAAIL,EAAU7J,MAC1BA,KAAKmK,MAAQ,IAAI3F,EAAUxE,OChVzBoK,EAAS,CACbC,KAAM,oBACNC,KAAM,oBACNC,KAAM,oBACNC,MAAO,qBACPC,KAAM,oBACNC,KAAM,qBAGOC,cAAQ,SAAAC,GAAA,SAAAC,IAAA,IAAAC,EAAA/L,EAAA5E,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAA6K,GAAA,QAAAE,EAAAC,UAAA1Q,OAAA2Q,EAAA,IAAAxM,MAAAsM,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAD,EAAAC,GAAAF,UAAAE,GAAA,OAAAnM,EAAA5E,OAAAgR,EAAA,EAAAhR,CAAA6F,MAAA8K,EAAA3Q,OAAAiR,EAAA,EAAAjR,CAAA0Q,IAAAQ,KAAAC,MAAAR,EAAA,CAAA9K,MAAArD,OAAAsO,MAEnBrM,MAAQ,CACN2M,SAAUC,KAAKxR,MAAMyR,aAAaC,QAAQ,WAAY,UACtDC,WAAW,EACXC,qBAAqB,GALJ7M,EA0BnB8M,QAAU,GA1BS9M,EA2BnB+M,WAAa,SAAA1I,GACX,OAAIrE,EAAK8M,QAAQzI,GACRiE,QAAQG,QAAQzI,EAAK8M,QAAQzI,IAG/B2I,IAAK3B,EAAOhH,IAAO4C,KAAK,SAAAgG,GAE7B,OADAjN,EAAK8M,QAAQzI,GAAQ4I,EACdA,KAlCQjN,EAsCnBkN,UAAY,SAAA7I,GACV,IAAKgH,EAAOhH,GACV,MAAM,IAAI5F,MAAJ,uBAAAb,OAAiCyG,EAAjC,OAERrE,EAAK+M,WAAW1I,GAAM4C,KAAK,WACzBkG,IAAKnN,EAAK8M,QAAQzI,OA3CHrE,EA+CnBQ,eAAiB,SAAAJ,GACfA,EAAMK,iBACN,IAAM3E,EAAOkE,EAAKW,KAAKyM,IAAI5R,MAAMQ,OAC7BF,IACFmP,EAAMG,MAAMxB,QAAQ9N,GACpBkE,EAAKW,KAAKyM,IAAI5R,MAAQ,GACtBwE,EAAKkN,UAAU,UArDAlN,EAyDnBqN,qBAAuB,WAAqB,IAApBC,EAAoBrB,UAAA1Q,OAAA,QAAAgB,IAAA0P,UAAA,GAAAA,UAAA,GAAT,IACjCjM,EAAKgB,SAAS,CAAE4L,WAAW,GAAQ,WACjCzL,OAAOmG,WAAW,WACXtH,EAAKuN,YACRvN,EAAKgB,SAAS,CAAE4L,WAAW,KAE5BU,MA/DYtN,EAmEnBiK,SAAW,SAAA5K,GACT,IAAMmO,GAAcnO,EAAKxC,KACzBoO,EAAMG,MAAMnB,SAAS5K,GACjBmO,GACFxN,EAAKkN,UAAU,QACflN,EAAKqN,wBAELrN,EAAKkN,UAAU,SA1EAlN,EA8EnBoJ,WAAa,SAAA/J,GACX4L,EAAMG,MAAMhC,WAAW/J,GACvBW,EAAKkN,UAAU,SACXlN,EAAKyN,mBACPtM,OAAOuM,aAAa1N,EAAKyN,mBAE3BzN,EAAKyN,kBAAoBtM,OAAOmG,WAAW,WACpCtH,EAAKuN,YACJtC,EAAMG,MAAMjF,cACd8E,EAAMG,MAAMjF,YAAc,OAG7B,MA1FcnG,EA6FnB2N,WAAa,WAGX1C,EAAMG,MAAMhC,WAAW6B,EAAMG,MAAMjF,aACnCnG,EAAKkN,UAAU,SAjGElN,EAoGnB0K,eAAiB,SAAAtK,GACf6K,EAAMG,MAAMV,iBACZ1K,EAAKkN,UAAU,SAtGElN,EAyGnBuK,WAAa,SAAAqD,GACX3C,EAAMG,MAAMb,aACZvK,EAAKkN,UAAU,SA3GElN,EA8GnBqJ,WAAa,SAAChK,EAAMvD,EAAMyD,EAAOwB,GAC/BkK,EAAMG,MAAM/B,WAAWhK,EAAMvD,EAAMyD,EAAOwB,IA/GzBf,EAsHnB6N,eAAiB,WAAuC,IAAtCxO,EAAsC4M,UAAA1Q,OAAA,QAAAgB,IAAA0P,UAAA,GAAAA,UAAA,GAA/B,KAAMlM,EAAyBkM,UAAA1Q,OAAA,QAAAgB,IAAA0P,UAAA,IAAAA,UAAA,GACtDjM,EAAKgB,SAAS,CAAE6L,oBAAqB9M,GAAgB,WACnDkL,EAAMG,MAAMhF,SAAW/G,KAxHRW,EA4HnBkK,iBAAmB,SAAA7K,GACjB4L,EAAMG,MAAMlB,iBAAiB7K,IA7HZW,EAiInB8N,eAAiB,SAAA1N,GACfJ,EAAKgB,SAAS,CAAEwL,UAAWxM,EAAKH,MAAM2M,UAAY,WAChDE,aAAaqB,QAAQ,WAAYtB,KAAKuB,UAAUhO,EAAKH,MAAM2M,cAnI5CxM,EAAA,OAAA5E,OAAA6S,EAAA,EAAA7S,CAAA0Q,EAAAD,GAAAzQ,OAAA8S,EAAA,EAAA9S,CAAA0Q,EAAA,EAAAxL,IAAA,uBAAA9E,MAAA,WASjByF,KAAKsM,YAAa,IATD,CAAAjN,IAAA,oBAAA9E,MAAA,WAaZ2S,eAAexB,QAAQ,iBAE1B1L,KAAKN,KAAKyM,IAAIlM,QAEhBkN,SAASpP,MAAQ,oBAEjB,IAAMqP,EAAM,eACZ,GAAIlN,OAAOgE,SAASmJ,MAAQD,EAAI3S,KAAKyF,OAAOgE,SAASmJ,MAAO,CAC1D,IAAMC,EAAQpN,OAAOgE,SAASmJ,KAAKnS,MAAMkS,GAAK,GAC9CpD,EAAMG,MAAM7E,cAAgBiI,mBAAmBD,MAtBhC,CAAAjO,IAAA,SAAA9E,MAAA,WAuIV,IAAA8F,EAAAL,KACDwN,EAAc,CAClBC,GAAI,GAENzD,EAAMG,MAAMlF,MAAMsE,QAAQ,SAAAnL,GACxB,GAAIA,EAAK0B,QAAS,CAChB,IAAMA,EAAU1B,EAAK0B,SAAW,GAC3B0N,EAAY1N,KACf0N,EAAY1N,GAAW,GAEzB0N,EAAY1N,KAEd0N,EAAY,QAEd,IAAME,EAAiBvT,OAAOC,KAAKoT,GAAaxQ,OAC1CiI,EAAQ+E,EAAMG,MAAMlF,MAAM0I,OAAO,SAAAvP,GACrC,QACE4L,EAAMG,MAAM7E,eACZlH,EAAK0B,UAAYkK,EAAMG,MAAM7E,iBAIvBlH,EAAK2K,UAET6E,EAAe3I,EAAM0I,OAAO,SAAAvP,GAAI,OAAKA,EAAKoL,SAC1CqE,EAAYD,EAAaD,OAAO,SAAAvP,GACpC,OAAIiC,EAAKzB,MAAM2M,WACLnN,EAAKxC,OAIXkS,EAAYF,EAAaD,OAAO,SAAAvP,GAAI,OAAIA,EAAKxC,OAAMtB,OACnDyT,EAAW9I,EAAM3K,OACjB0T,EAAeJ,EAAatT,OAC5B2T,EAAWL,EAAanM,IAAI,SAAArD,GAAI,OAAIA,EAAK6D,UAE/C,OACEpE,EAAAZ,EAAAa,cAAA,WACED,EAAAZ,EAAAa,cAAA,+BAECkC,KAAKpB,MAAM+M,UACV9N,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,QACbzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,WACfzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,WAEf,KAEH0J,EAAMG,MAAMjF,YACXrH,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,6CAObzC,EAAAZ,EAAAa,cAAA,UAAQwC,UAAU,oBAAoBC,QAASP,KAAK0M,YAApD,eAEU,IACV7O,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,kBACVC,QAAS,SAAApB,GACP6K,EAAMG,MAAMjF,YAAc,OAH9B,UASA,KAEH8E,EAAMG,MAAM/E,eACXvH,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,8CACbzC,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,SACVC,QAAS,SAAApB,GACP6K,EAAMG,MAAM/E,eAAiB,QAGjCvH,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,oBACVC,QAASP,KAAKyJ,gBAFhB,qBAKU,IACV5L,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,kBACVC,QAAS,SAAApB,GACP6K,EAAMG,MAAM/E,eAAiB,OAHjC,UASA,KAEH4E,EAAMG,MAAMhF,SACXtH,EAAAZ,EAAAa,cAACoQ,EAAD,CACE9P,KAAM4L,EAAMG,MAAMhF,SAClBxF,KAAMK,KAAKoI,WACX9I,MAAOU,KAAK4M,eACZhN,OAAQI,KAAKmI,WACbvM,KAAMoE,KAAKgJ,SACX1H,kBAAmB0I,EAAMG,MAAM7I,kBAC/BsK,oBAAqB5L,KAAKpB,MAAMgN,sBAEhC,KAEJ/N,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,kBACbzC,EAAAZ,EAAAa,cAAA,QAAMkD,SAAUhB,KAAKT,gBACnB1B,EAAAZ,EAAAa,cAAA,SACEwC,UAAU,iBACVK,KAAK,OACLM,IAAI,MACJO,YAAY,kBAGfkM,EAAepT,OAAS,EACvBuD,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,iBACbzC,EAAAZ,EAAAa,cAAA,UACG4P,EAAejM,IAAI,SAAA3B,GAClB,OACEjC,EAAAZ,EAAAa,cAAA,MACEuB,IAAKS,EACLQ,UACE0J,EAAMG,MAAM7E,gBAAkBxF,IAC5BkK,EAAMG,MAAM7E,gBAAkBxF,EAC5B,YACA,MAGNjC,EAAAZ,EAAAa,cAAA,KACE4D,KAAI,YAAA/E,OAAcmD,GAClBS,QAAS,SAAApB,GACPA,EAAMK,iBACFM,GACFkK,EAAMG,MAAM7E,cAAgBxF,EAC5BI,OAAOgE,SAASmJ,KAAhB,YAAA1Q,OAAmCmD,KAEnCkK,EAAMG,MAAM7E,cAAgB,KAC5BpF,OAAOgE,SAASmJ,KAAO,MAI1BvN,GAAoB,MAbvB,KAagC0N,EAAY1N,GAb5C,UAuBR,KACJjC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,wBACbzC,EAAAZ,EAAAa,cAACqQ,EAAA,gBAAD,KACGN,EAAUpM,IAAI,SAAArD,GAAI,OACjBP,EAAAZ,EAAAa,cAACqQ,EAAA,cAAD,CACE9O,IAAKjB,EAAK8E,IAAM9E,EAAK6D,QACrBmM,QAAS,IACTC,WAAW,QAGXxQ,EAAAZ,EAAAa,cAACwQ,EAAD,CACElQ,KAAMA,EACN6P,SAAUA,EACV9F,WAAY9H,EAAK8H,WACjBa,SAAU3I,EAAK2I,SACfuF,aAAclO,EAAKkO,aACnBC,YAAanO,EAAKuM,eAClB3D,iBAAkB5I,EAAK4I,yBAQlC4E,EAAUvT,OACTuD,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,mBACbzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,UACbzC,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,8BACVC,QAASP,KAAKsJ,YAFhB,gBAOFzL,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,UACbzC,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,8BACVC,QAASP,KAAK6M,gBAEb7M,KAAKpB,MAAM2M,SAAX,oBAAA5O,OACuBmR,EADvB,yBAAAnR,OAEuBmR,EAFvB,QAOPjQ,EAAAZ,EAAAa,cAAA,KAAGwC,UAAU,mBAAb,6CAKDyN,EAAWC,EACVnQ,EAAAZ,EAAAa,cAAA,SACED,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,8BACVC,QAAS,SAAApB,GACP6K,EAAMG,MAAMV,mBAHhB,aAMasE,EAAWC,EANxB,mBASA,KAEJnQ,EAAAZ,EAAAa,cAAC2Q,EAAD,CAAalJ,QAASyE,EAAMG,MAAM5E,eAhWrBsF,EAAA,CACE1I,IAAMC,YAsWzBsM,EAAc/D,YAAQ,SAAAgE,GAAA,SAAAD,IAAA,IAAAE,EAAAnM,EAAAtI,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAA0O,GAAA,QAAAG,EAAA7D,UAAA1Q,OAAA2Q,EAAA,IAAAxM,MAAAoQ,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAA7D,EAAA6D,GAAA9D,UAAA8D,GAAA,OAAArM,EAAAtI,OAAAgR,EAAA,EAAAhR,CAAA6F,MAAA4O,EAAAzU,OAAAiR,EAAA,EAAAjR,CAAAuU,IAAArD,KAAAC,MAAAsD,EAAA,CAAA5O,MAAArD,OAAAsO,MAExB8D,UAAY,SAAAxJ,GACV,OAAMA,EAAQE,aAAeF,EAAQG,YAWlCH,EAAQE,cAAgBF,EAAQG,aACjCH,EAAQE,YAAcF,EAAQG,YAG5B7H,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,CAAMC,GAAG,WAAW3O,UAAU,oBAA9B,iBACiB,IACdrC,YAAesH,EAAQE,YAAa,IAAI7H,KAAQ,CAC/CM,WAAW,IAHf,KASDqH,EAAQG,cAAgBH,EAAQE,aACjCF,EAAQG,YAAcH,EAAQE,YAG5B5H,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,CAAMC,GAAG,WAAW3O,UAAU,mBAA9B,6BAC6B,IAC1BrC,YAAesH,EAAQG,YAAa,IAAI9H,KAAQ,CAC/CM,WAAW,IAHf,KASGL,EAAAZ,EAAAa,cAAA,aAAQ0N,KAAKuB,UAAU/C,EAAMG,MAAM5E,UAnCtC1H,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,CACEC,GAAG,QACHlR,MAAM,gCACNuC,UAAU,oBAHZ,QAKOzC,EAAAZ,EAAAa,cAAA,gBALP,gBALkB2E,EAAA,OAAAtI,OAAA6S,EAAA,EAAA7S,CAAAuU,EAAAC,GAAAxU,OAAA8S,EAAA,EAAA9S,CAAAuU,EAAA,EAAArP,IAAA,SAAA9E,MAAA,WA2CtB,OACEsD,EAAAZ,EAAAa,cAAA,KAAGwC,UAAU,sCACVN,KAAK+O,UAAU/E,EAAMG,MAAM5E,cA7CVmJ,EAAA,CACAvM,IAAMC,YAmD5B8M,EAAOvE,YAAQ,SAAAwE,GAAA,SAAAD,IAAA,IAAAE,EAAAzM,EAAAxI,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAAkP,GAAA,QAAAG,EAAArE,UAAA1Q,OAAA2Q,EAAA,IAAAxM,MAAA4Q,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAArE,EAAAqE,GAAAtE,UAAAsE,GAAA,OAAA3M,EAAAxI,OAAAgR,EAAA,EAAAhR,CAAA6F,MAAAoP,EAAAjV,OAAAiR,EAAA,EAAAjR,CAAA+U,IAAA7D,KAAAC,MAAA8D,EAAA,CAAApP,MAAArD,OAAAsO,MAEjBrM,MAAQ,CACN2Q,iBAAiB,EACjBC,UAAU,EACVC,QAAS,MALM9M,EAQjB+M,eAAiB,SAAAvQ,GACY,OAAvBwD,EAAK/D,MAAM6Q,SACb9M,EAAK5C,SAAS,CAAE0P,QAAS9M,EAAK3D,MAAMZ,KAAKvD,OAE3C8H,EAAK5C,SAAS,CAAEyP,UAAW7M,EAAK/D,MAAM4Q,UAAY,WAC5C7M,EAAK/D,MAAM4Q,SACb7M,EAAKjD,KAAK7E,KAAKoF,QAGf0C,EAAK3D,MAAMuP,aAAa5L,EAAK/D,MAAM6Q,QAAS9M,EAAK3D,MAAMZ,SAjB5CuE,EAqBjBgN,eAAiB,SAAAxQ,GACfwD,EAAK5C,SAAS,CAAE0P,QAAStQ,EAAMwC,OAAOpH,SAtBvBoI,EAyBjBiN,OAAS,GAzBQjN,EA0BjBkN,iBAAmB,IA1BFlN,EA4BjBmN,iBAAmB,SAAA3Q,GACjB,IAAM4Q,EAAQ5Q,EAAM6Q,QAAQ,GAC5BrN,EAAKiN,OAAOK,EAAIF,EAAMG,QACtBvN,EAAKiN,OAAOO,EAAIJ,EAAMK,QACtBzN,EAAKjD,KAAK2Q,cAAc7P,MAAM,eAAiB,SAC/CmC,EAAKjD,KAAK2Q,cAAc7P,MAAxB,SAA4C,WAjC7BmC,EAmCjB2N,gBAAkB,SAAAnR,GAChB,GAAIA,EAAMoR,gBAAkBpR,EAAMoR,eAAejW,OAAQ,CACvD,IAAMyV,EAAQ5Q,EAAMoR,eAAe,GAC7BC,EAAQT,EAAMG,QAAUvN,EAAKiN,OAAOK,EACpCQ,EAAQV,EAAMK,QAAUzN,EAAKiN,OAAOO,GAIxCxN,EAAKiN,OAAOc,SACXC,KAAKC,IAAIJ,GAAS,IAAMG,KAAKC,IAAIJ,GAASG,KAAKC,IAAIH,MAEpD9N,EAAKiN,OAAOiB,SAAU,EACtBlO,EAAKiN,OAAOc,SAAU,EACtB/N,EAAKjD,KAAK2Q,cAAc7P,MAAM,eAA9B,GAAA7D,OAAkD6T,EAAlD,MACIG,KAAKC,IAAIJ,GAAS,KACpB7N,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,gBACzCpO,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,SACzCpO,EAAKjD,KAAK2Q,cAAcS,UAAUpW,IAAI,eAC7BiW,KAAKC,IAAIJ,GAAS,IAC3B7N,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,gBACzCpO,EAAKjD,KAAK2Q,cAAcS,UAAUpW,IAAI,SACtCiI,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,gBAEzCpO,EAAKjD,KAAK2Q,cAAcS,UAAUpW,IAAI,gBACtCiI,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,SACzCpO,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,kBA5DhCpO,EAoEjBqO,eAAiB,SAAA7R,GACf,IACMqR,EADQrR,EAAMoR,eAAe,GACfL,QAAUvN,EAAKiN,OAAOK,EACpCgB,EAAON,KAAKC,IAAIJ,GAClB7N,EAAKiN,OAAOiB,SAAWI,EAAOtO,EAAKkN,mBACjCW,EAAQ,EACV7N,EAAK3D,MAAMmJ,WAAWxF,EAAK3D,MAAMZ,MAEjCuE,EAAK3D,MAAMgK,SAASrG,EAAK3D,MAAMZ,OAGnCuE,EAAKiN,OAAS,GACdjN,EAAKjD,KAAK2Q,cAAc7P,MAAM,eAAiB,IAC/CmC,EAAKjD,KAAK2Q,cAAc7P,MAAM,eAAiB,SAC/CmC,EAAKjD,KAAK2Q,cAAc7P,MAAxB,SAA4C,QAC5CmC,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,gBACzCpO,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,SACzCpO,EAAKjD,KAAK2Q,cAAcS,UAAUC,OAAO,eArF1BpO,EAAA,OAAAxI,OAAA6S,EAAA,EAAA7S,CAAA+U,EAAAC,GAAAhV,OAAA8S,EAAA,EAAA9S,CAAA+U,EAAA,EAAA7P,IAAA,SAAA9E,MAAA,WAwFR,IAAA2W,EAAAlR,KACC5B,EAAS4B,KAAKhB,MAAdZ,KACF+S,EAAiBzT,YAAOU,EAAK6D,SAC7BmP,EAAkB1T,YAAOU,EAAK8D,UAChCmP,EAAgB,GAKpB,OAJIjT,EAAKxC,OACPyV,EAAgB,aAIhBxT,EAAAZ,EAAAa,cAAA,OACEwC,UAAU,OACVvC,MACEK,EAAK6D,UAAY7D,EAAK8D,SAAtB,SAAAvF,OACawU,GADb,SAAAxU,OAEayU,IAGfvT,EAAAZ,EAAAa,cAACwT,EAAD,CAAiBC,SAAUnT,EAAK6D,UAChCpE,EAAAZ,EAAAa,cAAC0T,EAAD,CACEtI,OAAQ9K,EAAK8K,OACbuI,OAAQ,WACNP,EAAKlS,MAAMiK,iBAAiB7K,MAGhCP,EAAAZ,EAAAa,cAAC4T,EAAD,CACE5R,QAAS1B,EAAK0B,QACdS,QAAS,SAAApB,GACPA,EAAMK,iBACN0R,EAAKlS,MAAMwP,YAAYpQ,GAAM,MAGjCP,EAAAZ,EAAAa,cAAA,KACEwC,UAAW+Q,EACXtT,MAAM,gBACNyC,MAAO,CAAEmR,OAAQ,WACjBpR,QAAS,SAAApB,GACP+R,EAAKlS,MAAMwP,YAAYpQ,IAEzB6C,IAAI,gBACJ2Q,aAAc5R,KAAK8P,iBACnB+B,YAAa7R,KAAKsQ,gBAClBwB,WAAY9R,KAAKgR,gBAchB5S,EAAKvD,MAEPuD,EAAKE,MACJT,EAAAZ,EAAAa,cAAA,KAAGwC,UAAU,uBACXzC,EAAAZ,EAAAa,cAAA,oBAQCM,EAAKE,OAEN,UA9JO4Q,EAAA,CACA/M,IAAMC,YAoKrB2P,EAAkB,SAAApO,GAAkB,IAEpC9I,EAFqB0W,EAAe5N,EAAf4N,SACnB5T,EAAM,IAAIC,KAchB,OAXE/C,EADEmX,YAAUrU,EAAK4T,GACV,QACES,YAAUT,EAAUU,YAAQtU,EAAK,IACnC,YAIAuU,YAAqBX,EAAUY,YAAWxU,GAAM,CACrDO,WAAW,IAIRL,EAAAZ,EAAAa,cAAA,QAAMwC,UAAU,gCAAgCzF,IAGzD,SAAS2W,EAAT7H,GAAwC,IAAlBT,EAAkBS,EAAlBT,OAAQuI,EAAU9H,EAAV8H,OAC5B,OACE5T,EAAAZ,EAAAa,cAAA,KACE4D,KAAK,IACLpB,UAAU,0CACVvC,MAAM,uDACNwC,QAAS,SAAApB,GACPA,EAAMK,iBACNiS,MAGDvI,EAAS,SAAW,iDCxiBZkJ,GApEEzH,YAAQ,SAAAC,GAAA,SAAAwH,IAAA,OAAAjY,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAAoS,GAAAjY,OAAAgR,EAAA,EAAAhR,CAAA6F,KAAA7F,OAAAiR,EAAA,EAAAjR,CAAAiY,GAAA9G,MAAAtL,KAAAgL,YAAA,OAAA7Q,OAAA6S,EAAA,EAAA7S,CAAAiY,EAAAxH,GAAAzQ,OAAA8S,EAAA,EAAA9S,CAAAiY,EAAA,EAAA/S,IAAA,oBAAA9E,MAAA,WAGnB4S,SAASpP,MAAQ,gBAHE,CAAAsB,IAAA,uBAAA9E,MAAA,WAOnByF,KAAKsM,YAAa,IAPC,CAAAjN,IAAA,SAAA9E,MAAA,WAWnB,IAAM8X,EAAYrI,EAAMG,MAAMlF,MAAM0I,OAAO,SAAAvP,GAAI,OAAIA,EAAKxC,OAClD0W,EAAS,GACfD,EAAUE,UAAUhJ,QAAQ,SAAAnL,GAC1B,IAAMb,EAAO4U,YAAW/T,EAAKxC,MAAM2K,UAC9B+L,EAAO/U,KACV+U,EAAO/U,GAAQ,IAEjB+U,EAAO/U,GAAM2J,KAAK9I,KAEpB,IAAMoU,EAAQrY,OAAOC,KAAKkY,GAAQ7Q,IAAI,SAAAgR,GAAC,OAAIC,SAASD,EAAG,MACvDD,EAAMxV,KAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,IACzB,IAAIyV,EAAgB,KACpB,OACE9U,EAAAZ,EAAAa,cAAA,WACED,EAAAZ,EAAAa,cAAA,yBACAD,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,YACbzC,EAAAZ,EAAAa,cAAA,UAAQwC,UAAU,mBAChBzC,EAAAZ,EAAAa,cAAA,QAAMwC,UAAU,4BAAhB,UAEFzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,iBACbzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,sBAEhBkS,EAAM/Q,IAAI,SAAAlE,GACT,IAAM0H,EAAQqN,EAAO/U,GACfqV,EAAQC,aAAatV,GACvBuV,EAAc,KAWlB,OAVKH,GAAkBI,aAAQH,EAAOD,KACpCG,EACEjV,EAAAZ,EAAAa,cAAA,UAAQwC,UAAU,kBAAkBjB,IAAKuT,GACvC/U,EAAAZ,EAAAa,cAAA,QAAMwC,UAAU,kBACb0S,aAAOJ,EAAO,UAKvBD,EAAgBC,EACT,CACLE,EACAjV,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,gBAAgBjB,IAAK9B,GAClCM,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,oBACfzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,oBACbzC,EAAAZ,EAAAa,cAAA,KAAGwC,UAAU,WAAW2S,GAAa1V,IACpC0H,EAAMxD,IAAI,SAAArD,GAAI,OAAIP,EAAAZ,EAAAa,cAAA,KAAGuB,IAAKjB,EAAK8E,IAAK9E,EAAKvD,aAKlDgD,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,mBACbzC,EAAAZ,EAAAa,cAAA,QAAMwC,UAAU,4BAAhB,cA3DW8R,EAAA,CACAjQ,IAAMC,YAqEzB6Q,GAAe,SAAA1B,GACnB,IAAM5T,EAAM,IAAIC,KAShB,OAPIoU,YAAUrU,EAAK4T,GACV,QACES,YAAUT,EAAUU,YAAQtU,EAAK,IACnC,YAEAqV,aAAOzB,EAAU,eC/Bb2B,GAxDFvI,YAAQ,SAAAC,GAAA,SAAAsI,IAAA,IAAApI,EAAA/L,EAAA5E,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAAkT,GAAA,QAAAnI,EAAAC,UAAA1Q,OAAA2Q,EAAA,IAAAxM,MAAAsM,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAD,EAAAC,GAAAF,UAAAE,GAAA,OAAAnM,EAAA5E,OAAAgR,EAAA,EAAAhR,CAAA6F,MAAA8K,EAAA3Q,OAAAiR,EAAA,EAAAjR,CAAA+Y,IAAA7H,KAAAC,MAAAR,EAAA,CAAA9K,MAAArD,OAAAsO,MAEjBkI,UAAY,iBAFKpU,EAAA,OAAA5E,OAAA6S,EAAA,EAAA7S,CAAA+Y,EAAAtI,GAAAzQ,OAAA8S,EAAA,EAAA9S,CAAA+Y,EAAA,EAAA7T,IAAA,oBAAA9E,MAAA,WAIf4S,SAASpP,MAAQiC,KAAKmT,YAJP,CAAA9T,IAAA,uBAAA9E,MAAA,WAQfyF,KAAKsM,YAAa,IARH,CAAAjN,IAAA,SAAA9E,MAAA,WAYf,OACEsD,EAAAZ,EAAAa,cAAA,WACED,EAAAZ,EAAAa,cAAA,UAAKkC,KAAKmT,WAETnJ,EAAME,KAAKH,YACVlM,EAAAZ,EAAAa,cAACsV,GAAD,CACE5N,MAAOwE,EAAME,KAAKH,YAClBzK,MAAO,SAAAH,GACL6K,EAAME,KAAKH,YAAc,QAG3B,KAEJlM,EAAAZ,EAAAa,cAAA,KAAG0C,MAAO,CAAE6S,UAAW,WACpBrJ,EAAME,KAAKJ,SACVjM,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,6BACVC,QAASP,KAAKhB,MAAMsU,QAFtB,WAOAzV,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,6BACVC,QAASP,KAAKhB,MAAMuU,OAFtB,WASHvJ,EAAME,KAAKJ,SACVjM,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,OACbzC,EAAAZ,EAAAa,cAAA,2BACgBD,EAAAZ,EAAAa,cAAA,YAAOkM,EAAME,KAAKJ,SAAS0J,SAG3C,UAjDON,EAAA,CACA/Q,IAAMC,YAyD3B,SAASgR,GAATzP,GAA2C,IAAhBrE,EAAgBqE,EAAhBrE,MAAOkG,EAAS7B,EAAT6B,MAChC,OACE3H,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,0BAA0BE,MAAO,CAAEC,OAAQ,KACxD5C,EAAAZ,EAAAa,cAAA,UAAQwC,UAAU,SAASC,QAASjB,IACpCzB,EAAAZ,EAAAa,cAAA,SACED,EAAAZ,EAAAa,cAAA,yCAEFD,EAAAZ,EAAAa,cAAA,6GAIC0H,EAAMiO,OACL5V,EAAAZ,EAAAa,cAAA,wBACcD,EAAAZ,EAAAa,cAAA,YAAO0H,EAAMiO,SAG3B5V,EAAAZ,EAAAa,cAAA,WAAM0N,KAAKuB,UAAUvH,KCzE7B,IAsDekO,GAtDE/I,YAAQ,SAAAC,GAAA,SAAA8I,IAAA,IAAA5I,EAAA/L,EAAA5E,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAA0T,GAAA,QAAA3I,EAAAC,UAAA1Q,OAAA2Q,EAAA,IAAAxM,MAAAsM,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAD,EAAAC,GAAAF,UAAAE,GAAA,OAAAnM,EAAA5E,OAAAgR,EAAA,EAAAhR,CAAA6F,MAAA8K,EAAA3Q,OAAAiR,EAAA,EAAAjR,CAAAuZ,IAAArI,KAAAC,MAAAR,EAAA,CAAA9K,MAAArD,OAAAsO,MAErBrM,MAAQ,GAFaG,EAGrBoU,UAAY,WAHSpU,EAYrB4U,eAAiB,WACf,IAAMC,EAAUzG,SAAS0G,cAAc,aACvC,OAAO1Z,OAAOqC,OAAO,GAAIoX,EAAQE,UAdd/U,EAAA,OAAA5E,OAAA6S,EAAA,EAAA7S,CAAAuZ,EAAA9I,GAAAzQ,OAAA8S,EAAA,EAAA9S,CAAAuZ,EAAA,EAAArU,IAAA,oBAAA9E,MAAA,WAKnB4S,SAASpP,MAAQiC,KAAKmT,YALH,CAAA9T,IAAA,uBAAA9E,MAAA,WASnByF,KAAKsM,YAAa,IATC,CAAAjN,IAAA,SAAA9E,MAAA,WAkBnB,IAAM2L,EAAOlG,KAAK2T,iBAElB,OACE9V,EAAAZ,EAAAa,cAAA,WACED,EAAAZ,EAAAa,cAAA,UAAKkC,KAAKmT,WACVtV,EAAAZ,EAAAa,cAACiW,GAAD,MAEAlW,EAAAZ,EAAAa,cAAA,KAAG0C,MAAO,CAAE6S,UAAW,WAAvB,mBACmB,IACjBxV,EAAAZ,EAAAa,cAAA,KACE4D,KAAI,4CAAA/E,OAA8CuJ,EAAK8N,QACvDjW,MAAOmI,EAAK3I,MAEX2I,EAAK8N,OAAO7M,MAAM,EAAG,IACnB,IACLtJ,EAAAZ,EAAAa,cAAA,iBAEGG,YAAeiI,EAAK3I,KAAM,IAAIK,KAAQ,CACrCM,WAAW,IAHf,KAMS,IACTL,EAAAZ,EAAAa,cAAA,KACE4D,KAAK,iCACLE,IAAI,sBACJD,OAAO,UAHT,wBAxCa+R,EAAA,CACAvR,IAAMC,YAuD/B,SAAS2R,KAAc,IAAAE,EACS9R,IAAM+R,UAAS,GADxBC,EAAAha,OAAAyP,EAAA,EAAAzP,CAAA8Z,EAAA,GACdG,EADcD,EAAA,GACLE,EADKF,EAAA,GAGrB,OACEtW,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,OACZ8T,EACCvW,EAAAZ,EAAAa,cAAA,MAAIwC,UAAU,qBAAd,uCAGE,KACJzC,EAAAZ,EAAAa,cAAA,UACEwC,UACE8T,EACI,gCACA,iCAEN7T,QAAS,SAAApB,GACHiV,GACFpK,EAAMG,MAAMlC,eACZoM,GAAW,IAEXA,GAAW,IAGf1T,KAAK,UAEJyT,EAAU,mBAAqB,mBClFxC,IAuBeE,GAvBC3J,YAAQ,SAAAC,GAAA,SAAA0J,IAAA,IAAAxJ,EAAA/L,EAAA5E,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAAsU,GAAA,QAAAvJ,EAAAC,UAAA1Q,OAAA2Q,EAAA,IAAAxM,MAAAsM,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAD,EAAAC,GAAAF,UAAAE,GAAA,OAAAnM,EAAA5E,OAAAgR,EAAA,EAAAhR,CAAA6F,MAAA8K,EAAA3Q,OAAAiR,EAAA,EAAAjR,CAAAma,IAAAjJ,KAAAC,MAAAR,EAAA,CAAA9K,MAAArD,OAAAsO,MAEpBrM,MAAQ,GAFYG,EAGpBoU,UAAY,WAHQpU,EAAA,OAAA5E,OAAA6S,EAAA,EAAA7S,CAAAma,EAAA1J,GAAAzQ,OAAA8S,EAAA,EAAA9S,CAAAma,EAAA,EAAAjV,IAAA,oBAAA9E,MAAA,WAKlB4S,SAASpP,MAAQiC,KAAKmT,YALJ,CAAA9T,IAAA,uBAAA9E,MAAA,WASlByF,KAAKsM,YAAa,IATA,CAAAjN,IAAA,SAAA9E,MAAA,WAalB,OACEsD,EAAAZ,EAAAa,cAAA,WACED,EAAAZ,EAAAa,cAAA,MAAIwC,UAAU,SAASN,KAAKmT,WAC5BtV,EAAAZ,EAAAa,cAACyW,GAAD,CAAStP,MAAO+E,EAAMG,MAAMxE,gBAhBd2O,EAAA,CACAnS,IAAMC,YAwBxBmS,GAAUpS,IAAMqS,KAAK,SAAA7Q,GAAe,IAAZsB,EAAYtB,EAAZsB,MAC5B,OAAKA,EAAM3K,OAITuD,EAAAZ,EAAAa,cAAA,WACED,EAAAZ,EAAAa,cAAA,MAAIwC,UAAU,SAAS2E,EAAM3K,OAA7B,kBACC2K,EAAMxD,IAAI,SAACyE,EAAMqC,GAAP,OACT1K,EAAAZ,EAAAa,cAAC2W,GAAD,CAAKpV,IAAK6G,EAAKe,MAAOf,KAAMA,EAAMwO,OAAQnM,OANvC1K,EAAAZ,EAAAa,cAAA,4BAYL6W,8MACJ/V,MAAQ,CACNgW,OAAQvU,EAAKrB,MAAM0V,+EAEZ,IAAAjS,EAAAzC,KACDkG,EAAO/L,OAAOqC,OAAO,GAAIwD,KAAKhB,MAAMkH,MACpC2O,EAAW,CACfC,SAAU,OAEP9U,KAAKpB,MAAMgW,SACdC,EAASE,UAAY,IACrBF,EAASG,aAAe,iCAE1B,IAAMzX,EAAO2I,EAAKe,MAElB,cADOf,EAAKe,MAEVpJ,EAAAZ,EAAAa,cAAA,OACEwC,UAAU,eACVE,MAAO,CACLuB,UAAW,GACXkT,WAAY,GACZC,UAAW,mBAGbrX,EAAAZ,EAAAa,cAAA,MACEwC,UACE4F,EAAKc,GACD,8BACA,6BAENxG,MAAO,CAAEE,aAAc,IAEtBwF,EAAKc,GAAK,KAAO,UAEpBnJ,EAAAZ,EAAAa,cAAA,qBACQ,IACND,EAAAZ,EAAAa,cAAA,SACGkV,aAAOzV,EAAM,YADhB,KAEGU,YAAeV,EAAM,IAAIK,KAAQ,CAChCM,WAAW,IAHf,MAQFL,EAAAZ,EAAAa,cAAA,OACE0C,MAAOqU,EACPtU,QAAS,SAAApB,GACPsD,EAAK1C,SAAS,CAAE6U,QAASnS,EAAK7D,MAAMgW,WAGrCpJ,KAAKuB,UAAU7G,EAAM,KAAM,YAlDpB/D,IAAMsB,8DCZxBvD,OAAOiV,YAAc,SAASC,GAC5B,IAAIC,EAAI7J,KAAKxR,MAAMyR,aAAa6J,WAChCD,GAAK,KAAiBD,EACtB3J,aAAaqB,QAAQ,YAAauI,IAGpC,IAAME,GAAU,SAAA5R,GAAA,IAAGO,EAAHP,EAAGO,SAAH,OACdrG,EAAAZ,EAAAa,cAAA,WACED,EAAAZ,EAAAa,cAAA,0BACeD,EAAAZ,EAAAa,cAAA,YAAOoG,EAASsR,aAyOpBC,GApOH9K,YAAQ,SAAAC,GAAA,SAAA6K,IAAA,IAAA3K,EAAA/L,EAAA5E,OAAAuK,EAAA,EAAAvK,CAAA6F,KAAAyV,GAAA,QAAA1K,EAAAC,UAAA1Q,OAAA2Q,EAAA,IAAAxM,MAAAsM,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAD,EAAAC,GAAAF,UAAAE,GAAA,OAAAnM,EAAA5E,OAAAgR,EAAA,EAAAhR,CAAA6F,MAAA8K,EAAA3Q,OAAAiR,EAAA,EAAAjR,CAAAsb,IAAApK,KAAAC,MAAAR,EAAA,CAAA9K,MAAArD,OAAAsO,MAEhBrM,MAAQ,CACN8W,SAAUxI,eAAexB,QAAQ,iBAHnB3M,EAwEhB4W,uBAAyB,SAAAC,GACvB,GAAIA,EAAY,CACd5L,EAAME,KAAKJ,SAAW8L,EAAWC,eACjC7L,EAAMG,MAAM9E,YAAcuQ,EAAWvQ,YACrC2E,EAAMG,MAAM3D,OACZwD,EAAMG,MAAMhE,cAEZ,IAAMmP,EAAmC,IAAvBM,EAAWE,WAAmB,IAAIlY,MAAO2I,UACvDqP,EAAWhX,cAGNgX,EAAWhX,MAEpB6M,aAAaqB,QAAQ,aAActB,KAAKuB,UAAU6I,IAClDnK,aAAaqB,QAAQ,YAAatB,KAAKuB,UAAUuI,MAtFrCvW,EA0FhBgX,uBAAyB,WAEvB,IAAMT,EAAY9J,KAAKxR,MAAMyR,aAAaC,QAAQ,cAE9CsK,EAAMV,GAAY,IAAI1X,MAAO2I,UACjChD,QAAQC,IACN,yBACAvF,YAAeqX,EAAW,IAAI1X,QAIhCoY,GAAO,MACqB,GAG1BzS,QAAQkD,KAAK,iCACb1H,EAAKkX,QAAQC,aAAa,GAAI,SAAC/Z,EAAKyZ,GAClC,GAAIzZ,EACF,MAAkB,mBAAdA,EAAIqJ,OACNjC,QAAQkD,KAAK,8CACN1H,EAAKwU,UAEZhQ,QAAQkD,KAAK,gCACNlD,QAAQiC,MAAMrJ,IAGzB4C,EAAK4W,uBAAuBC,MAG9B1V,OAAOmG,WAAW,WACXtH,EAAKuN,YACRvN,EAAKgX,0BAEN,MA3HShX,EAgIhBwU,MAAQ,WACNxU,EAAKkX,QAAQE,UAAU,CAErBvX,MAAO,MAnIKG,EAuIhBuU,OAAS,WACP7H,aAAa2K,WAAW,aACxB3K,aAAa2K,WAAW,cACxB3K,aAAa2K,WAAW,YACxB,IAAMC,EAAO,GAAA1Z,OAAMuD,OAAOgE,SAASxH,SAAtB,MAAAC,OAAmCuD,OAAOgE,SAASC,KAAnD,KACbpF,EAAKkX,QAAQK,OAAO,CAClBC,SAAUF,EACVG,SAAU5S,KA9IE7E,EAAA,OAAA5E,OAAA6S,EAAA,EAAA7S,CAAAsb,EAAA7K,GAAAzQ,OAAA8S,EAAA,EAAA9S,CAAAsb,EAAA,EAAApW,IAAA,oBAAA9E,MAAA,WAKI,IAAA8F,EAAAL,KACdA,KAAKpB,MAAM8W,UACb1V,KAAKyW,iBAAmBvW,OAAOmG,WAAW,WACxChG,EAAKN,SAAS,CAAE2V,SAAS,KACxB,OAELxI,eAAeJ,QAAQ,gBAAgB,GAEvC9C,EAAMG,MAAMvE,SAEZ5F,KAAK0W,iBAfS,CAAArX,IAAA,uBAAA9E,MAAA,WAmBdyF,KAAKsM,YAAa,EACdtM,KAAK2W,eACP3W,KAAK2W,cAAcC,eArBP,CAAAvX,IAAA,eAAA9E,MAAA,WA0BD,IAAAkI,EAAAzC,KACbA,KAAKiW,QAAU,IAAIY,KAAMC,QAAQ,CAC/BC,OAAQhT,EACRyS,SAAU5S,EACVoT,YAAa5S,EACb6S,SAAU3S,EACV4S,aAAc,iBACdC,MAAO,yBAGTnX,KAAKiW,QAAQmB,UAAU,GAAI,SAACjb,EAAKyZ,GAC/B,GAAIzZ,EACF,OAAOoH,QAAQiC,MAAMrJ,GAGnByZ,GAAc1V,OAAOgE,SAASmJ,OAChCnN,OAAOgE,SAASmJ,KAAO,IAGzB,IAAIgK,IAAgCzB,EAEpC,IAAKA,EAAY,EACfA,EAAapK,KAAKxR,MAAMyR,aAAaC,QAAQ,kBAE3C2L,GAA8B,GAEhC,IAAM/B,EAAY9J,KAAKxR,MAAMyR,aAAaC,QAAQ,cAC9C4J,GAAaA,GAAY,IAAI1X,MAAO2I,UAAY,IAElDqP,EAAa,MAGbA,GAMFnT,EAAKkT,uBAAuBC,GAE1ByB,GACF5U,EAAKsT,6BAnEK,CAAA1W,IAAA,SAAA9E,MAAA,WAkJP,IAAAoI,EAAA3C,KACP,OACEnC,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,KACEnR,EAAAZ,EAAAa,cAACwZ,GAAAra,EAAD,CACEsa,OAAQvX,KAAKpB,MAAM8W,QACnB8B,SAAO,EACPC,WAAW,4BACXC,MAAM,OACNC,YAAY,QACZ9c,KAAK,sBAELgD,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,aACbzC,EAAAZ,EAAAa,cAAA,OAAKwC,UAAU,OACZ0J,EAAME,KAAKJ,SACVjM,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,CAAMC,GAAG,QACPpR,EAAAZ,EAAAa,cAAA,UACEwC,UAAU,wCACVvC,MAAK,gBAAApB,OAAkBqN,EAAME,KAAKJ,SAAS1G,KAAtC,MAAAzG,OACHqN,EAAME,KAAKJ,SAAS0J,QAGtB3V,EAAAZ,EAAAa,cAAA,OAAK8Z,IAAK5N,EAAME,KAAKJ,SAAS+N,QAASC,IAAI,aAG7C,KAEJja,EAAAZ,EAAAa,cAACia,EAAA,EAAD,KACEla,EAAAZ,EAAAa,cAACia,EAAA,EAAD,CAAOC,KAAK,IAAIxd,OAAK,EAACyd,UAAWpN,IACjChN,EAAAZ,EAAAa,cAACia,EAAA,EAAD,CAAOC,KAAK,YAAYxd,OAAK,EAACyd,UAAW7F,KACzCvU,EAAAZ,EAAAa,cAACia,EAAA,EAAD,CACEC,KAAK,QACLxd,OAAK,EACL0d,OAAQ,SAAAlZ,GAAK,OACXnB,EAAAZ,EAAAa,cAACqa,GAADhe,OAAAqC,OAAA,GACMwC,EADN,CAEEuU,MAAO5Q,EAAK4Q,MACZD,OAAQ3Q,EAAK2Q,aAInBzV,EAAAZ,EAAAa,cAACia,EAAA,EAAD,CAAOC,KAAK,YAAYxd,OAAK,EAACyd,UAAWvE,KACzC7V,EAAAZ,EAAAa,cAACia,EAAA,EAAD,CAAOC,KAAK,WAAWxd,OAAK,EAACyd,UAAW3D,KACxCzW,EAAAZ,EAAAa,cAACia,EAAA,EAAD,CAAOE,UAAW1C,MAEpB1X,EAAAZ,EAAAa,cAAA,OACEwC,UAAU,8CACV8X,aAAW,cACX5X,MAAO,CACLuB,UAAW,GACXkT,WAAY,KAGdpX,EAAAZ,EAAAa,cAAA,UACED,EAAAZ,EAAAa,cAAA,UACED,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,CAAMC,GAAG,KAAT,SAEFpR,EAAAZ,EAAAa,cAAA,UACED,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,CAAMC,GAAG,aAAT,cAEFpR,EAAAZ,EAAAa,cAAA,UACED,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,CAAMC,GAAG,SACPpR,EAAAZ,EAAAa,cAACua,GAAD,CACEtO,YAAaC,EAAME,KAAKH,YACxBD,SAAUE,EAAME,KAAKJ,aAK3BjM,EAAAZ,EAAAa,cAAA,UACED,EAAAZ,EAAAa,cAACkR,EAAA,EAAD,CAAMC,GAAG,aAAT,uBAvNFwG,EAAA,CACAtT,IAAMC,YAqOpBiW,GAAelW,IAAMqS,KAAK,SAAA7K,GAA+B,IAA5BI,EAA4BJ,EAA5BI,YAAaD,EAAeH,EAAfG,SAC1CxJ,EAAY,oCACZ4F,EAAO,GACPnI,EAAQ,GAcZ,OAbIgM,GACFzJ,GAAa,oBACb4F,EAAO,IACPnI,EAAQ,mDACC+L,GACTxJ,GAAa,qBACbvC,EAAK,gBAAApB,OAAmBqN,EAAME,KAAKJ,SAAS1G,KAAvC,MAAAzG,OACHqN,EAAME,KAAKJ,SAAS0J,SAGtBlT,GAAa,qBACbvC,EAAQ,2DAGRF,EAAAZ,EAAAa,cAAA,QAAMwC,UAAWA,EAAWgY,aAAYpS,EAAMnI,MAAOA,GAArD,oBC3REwa,GAAcC,QACW,cAA7BtY,OAAOgE,SAASuU,UAEe,UAA7BvY,OAAOgE,SAASuU,UAEhBvY,OAAOgE,SAASuU,SAASvd,MACvB,2DAsCN,SAASwd,GAAgBC,EAAOC,GAC9BC,UAAUC,cACPC,SAASJ,GACT3S,KAAK,SAAAgT,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBta,QACfia,UAAUC,cAAcO,YAI1B9V,QAAQC,IACN,gHAKEoV,GAAUA,EAAOU,UACnBV,EAAOU,SAASN,KAMlBzV,QAAQC,IAAI,sCAGRoV,GAAUA,EAAOW,WACnBX,EAAOW,UAAUP,UAO5BvR,MAAM,SAAAjC,GACLjC,QAAQiC,MAAM,4CAA6CA,KCxFjEgU,IAAStB,OAAOra,EAAAZ,EAAAa,cAAC2b,GAAD,MAAStM,SAASuM,eAAe,SDc1C,SAAkBd,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAItf,IAAIsK,GAAwB3D,OAAOgE,SAASxC,MACpDiY,SAAWzZ,OAAOgE,SAASyV,OAIvC,OAGFzZ,OAAOC,iBAAiB,OAAQ,WAC9B,IAAMwY,EAAK,GAAAhc,OAAMkH,GAAN,sBAEP0U,IAgEV,SAAiCI,EAAOC,GAEtCgB,MAAMjB,GACH3S,KAAK,SAAA6T,GAEJ,IAAMC,EAAcD,EAAShT,QAAQkT,IAAI,gBAEnB,MAApBF,EAASpG,QACO,MAAfqG,IAA8D,IAAvCA,EAAYE,QAAQ,cAG5CnB,UAAUC,cAAcmB,MAAMjU,KAAK,SAAAgT,GACjCA,EAAakB,aAAalU,KAAK,WAC7B9F,OAAOgE,SAAS6D,aAKpB2Q,GAAgBC,EAAOC,KAG1BnR,MAAM,WACLlE,QAAQC,IACN,mEArFA2W,CAAwBxB,EAAOC,GAI/BC,UAAUC,cAAcmB,MAAMjU,KAAK,WACjCzC,QAAQC,IACN,+GAMJkV,GAAgBC,EAAOC,MCxC/BE,CAAuB,CACrBQ,SAAU,SAAAN,GAKRoB,gBAAM,CACJ1S,QAAS,iDACT/G,KAAM,UACN0Z,aAAa,EACbC,cAAc,EACdC,cAAc,EACdC,SAAU","file":"static/js/main.945424c4.chunk.js","sourcesContent":["const URL = require(\"url\");\nconst urlRegex = require(\"./url-regex\");\nconst normalizeUrl = require(\"normalize-url\");\n\nfunction getUrlsFromQueryParams(url) {\n  const ret = new Set();\n\n  // TODO: Use `(new URL(url)).searchParams` when targeting Node.js 8\n  const qs = URL.parse(url, true).query;\n\n  for (const key of Object.keys(qs)) {\n    const value = qs[key];\n    if (urlRegex({ exact: true }).test(value)) {\n      ret.add(value);\n    }\n  }\n\n  return ret;\n}\n\nmodule.exports = (text, options) => {\n  options = options || {};\n\n  const ret = new Set();\n\n  const add = url => {\n    ret.add(normalizeUrl(url.trim().replace(/\\.+$/, \"\"), options));\n  };\n\n  const urls = text.match(urlRegex()) || [];\n  for (const url of urls) {\n    add(url);\n\n    if (options.extractFromQueryString) {\n      for (const qsUrl of getUrlsFromQueryParams(url)) {\n        add(qsUrl);\n      }\n    }\n  }\n\n  return ret;\n};\n","const ipRegex = require('ip-regex');\nconst tlds = require('tlds');\n\nmodule.exports = opts => {\n\topts = Object.assign({strict: true}, opts);\n\n\tconst protocol = `(?:(?:[a-z]+:)?//)${opts.strict ? '' : '?'}`;\n\tconst auth = '(?:\\\\S+(?::\\\\S*)?@)?';\n\tconst ip = ipRegex.v4().source;\n\tconst host = '(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)';\n\tconst domain = '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*';\n\tconst tld = `(?:\\\\.${opts.strict ? '(?:[a-z\\\\u00a1-\\\\uffff]{2,})' : `(?:${tlds.sort((a, b) => b.length - a.length).join('|')})`})\\\\.?`;\n\tconst port = '(?::\\\\d{2,5})?';\n\tconst path = '(?:[/?#][^\\\\s\"]*)?';\n\tconst regex = `(?:${protocol}|www\\\\.)${auth}(?:localhost|${ip}|${host}${domain}${tld})${port}${path}`;\n\n\treturn opts.exact ? new RegExp(`(?:^${regex}$)`, 'i') : new RegExp(regex, 'ig');\n};\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faAngleDown,\n  faAngleUp,\n  faCheck,\n  faUndo\n} from \"@fortawesome/free-solid-svg-icons\";\nimport getUrls from \"./vendored/get-urls\";\nimport { toDate, formatDistance } from \"date-fns/esm\";\n\nconst DisplayDate = date => {\n  if (date === null) {\n    throw new Error(\"date is null\");\n  }\n  const dateObj = toDate(date);\n  const now = new Date();\n  return (\n    <span title={dateObj.toString()}>\n      {formatDistance(date, now, { addSuffix: true })}\n    </span>\n  );\n};\n\nconst getItemUrls = item => {\n  const urls = getUrls(item.text);\n  for (let url of getUrls(item.notes || \"\", {\n    stripHash: false\n  }).values()) {\n    urls.add(url);\n  }\n  return Array.from(urls);\n};\n\nexport default class EditModal extends React.Component {\n  state = {\n    saveDisabled: true,\n    advancedMode: true,\n    urls: getItemUrls(this.props.item),\n    newContext: null\n  };\n\n  componentDidMount() {\n    this.refs.text.focus();\n    window.addEventListener(\"keydown\", this._escapeKey, true);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this._escapeKey, true);\n  }\n\n  _escapeKey = event => {\n    if (event.defaultPrevented) {\n      return; // Do nothing if the event was already processed\n    }\n    if (event.key === \"Escape\") {\n      this.props.close();\n    }\n  };\n\n  itemFormSubmit = event => {\n    event.preventDefault();\n    this.itemFormSave();\n  };\n\n  itemFormSave = () => {\n    const text = this.refs.text.value.trim();\n    const notes =\n      (this.state.advancedMode && this.refs.notes.value.trim()) || null;\n    if (text) {\n      this.props.edit(this.props.item, text, notes, this.state.newContext);\n      this.props.close();\n    } else {\n      this.props.delete(this.props.item);\n      this.props.close();\n    }\n  };\n\n  onChangeContext = context => {\n    this.setState({ newContext: context }, () => {\n      this.itemFormSave();\n    });\n  };\n\n  render() {\n    const { item } = this.props;\n    return (\n      <div className=\"modal is-active\">\n        <div\n          className=\"modal-background\"\n          onClick={() => {\n            this.props.close();\n          }}\n        />\n\n        <div className=\"modal-content\">\n          <div className=\"box\" style={{ margin: 0 }}>\n            <div className=\"level is-mobile\" style={{ marginBottom: 20 }}>\n              <div className=\"level-item has-text-centered\">\n                <button\n                  type=\"button\"\n                  className={\n                    item.done ? \"button is-warning\" : \"button is-success\"\n                  }\n                  onClick={() => {\n                    this.props.done(item);\n                  }}\n                >\n                  {/* <span role=\"img\" aria-label=\"Toggle done\">\n                    ✔️\n                  </span> */}\n                  <FontAwesomeIcon icon={item.done ? faUndo : faCheck} />{\" \"}\n                  {item.done ? \"UNDONE!\" : \"DONE!\"}\n                </button>\n              </div>\n              <div className=\"level-item has-text-centered\">\n                <button\n                  type=\"button\"\n                  className=\"button is-link\"\n                  onClick={() => {\n                    this.setState({ advancedMode: !this.state.advancedMode });\n                  }}\n                >\n                  {this.state.advancedMode ? \"Less!\" : \"More?\"}\n                </button>\n              </div>\n              <div className=\"level-item has-text-centered\">\n                <button\n                  type=\"button\"\n                  className=\"button is-danger\"\n                  onClick={() => {\n                    this.props.delete(item);\n                  }}\n                >\n                  DELETE\n                </button>\n              </div>\n            </div>\n\n            <form onSubmit={this.itemFormSubmit}>\n              <input\n                className=\"input edit-item\"\n                type=\"text\"\n                ref=\"text\"\n                style={{ marginBottom: 5 }}\n                onChange={() => {\n                  if (this.state.saveDisabled) {\n                    this.setState({ saveDisabled: false });\n                  }\n                }}\n                defaultValue={item.text}\n              />\n            </form>\n            {this.state.advancedMode && (\n              <EditContextDropdown\n                onChangeContext={this.onChangeContext}\n                contextOptions={this.props.allContextOptions}\n                currentContext={item.context ? item.context : \"\"}\n              />\n            )}\n            {this.state.advancedMode ? (\n              <form onSubmit={this.itemFormSubmit}>\n                <textarea\n                  ref=\"notes\"\n                  className=\"textarea\"\n                  placeholder=\"Notes...\"\n                  defaultValue={item.notes || \"\"}\n                  onChange={() => {\n                    if (this.state.saveDisabled) {\n                      this.setState({ saveDisabled: false });\n                    }\n                  }}\n                />\n              </form>\n            ) : null}\n\n            {this.state.advancedMode && this.state.urls.length ? (\n              <p>\n                <b>URLs:</b>\n                {this.state.urls.map(url => (\n                  <a\n                    key={url}\n                    href={url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    style={{\n                      marginLeft: 10,\n                      display: this.state.urls.length > 1 ? \"block\" : \"inline\"\n                    }}\n                  >\n                    {url}\n                  </a>\n                ))}\n              </p>\n            ) : null}\n\n            {/* What's this for?! */}\n            {this.state.urls.length ? <ul /> : null}\n\n            <div className=\"level is-mobile\" style={{ marginTop: 25 }}>\n              <div className=\"level-left\">\n                <div className=\"level-item has-text-left\">\n                  <button\n                    className=\"button is-success\"\n                    onClick={this.itemFormSubmit}\n                    disabled={this.state.saveDisabled}\n                  >\n                    Save\n                  </button>\n                </div>\n              </div>\n              <div className=\"level-right\">\n                <div className=\"level-item has-text-right\">\n                  <button\n                    className=\"button\"\n                    onClick={event => {\n                      this.props.close();\n                    }}\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {this.state.advancedMode ? (\n              <p className=\"is-size-6\">\n                {item.created !== item.modified ? (\n                  <span>\n                    <b>Edited:</b> {DisplayDate(item.modified)}\n                  </span>\n                ) : (\n                  <span>\n                    <b>Added:</b> {DisplayDate(item.created)}\n                  </span>\n                )}\n              </p>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass EditContextDropdown extends React.PureComponent {\n  state = {\n    opened: false,\n    addNew: false\n  };\n  formSubmit = event => {\n    event.preventDefault();\n    const newContext = this.refs.newcontext.value.trim();\n    this.props.onChangeContext(newContext);\n  };\n  render() {\n    const { contextOptions, currentContext, onChangeContext } = this.props;\n    return (\n      <form onSubmit={this.formSubmit} style={{ marginBottom: 4 }}>\n        <div className={this.state.opened ? \"dropdown is-active\" : \"dropdown\"}>\n          <div className=\"dropdown-trigger\">\n            <button\n              type=\"button\"\n              className=\"button\"\n              aria-haspopup=\"true\"\n              aria-controls=\"dropdown-menu\"\n              onClick={event => {\n                event.preventDefault();\n                const wasOpen = !!this.state.opened;\n                this.setState({ opened: !this.state.opened }, () => {\n                  if (wasOpen && this.state.addNew) {\n                    this.setState({ addNew: false });\n                  }\n                });\n              }}\n            >\n              <span>\n                {this.state.opened ? \"Close\" : \"Move to a different context\"}\n              </span>\n              <FontAwesomeIcon\n                icon={this.state.opened ? faAngleUp : faAngleDown}\n                style={{ marginLeft: 10 }}\n              />\n            </button>\n          </div>\n          <div className=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n            <div className=\"dropdown-content\">\n              {contextOptions.map(context => {\n                return (\n                  <a\n                    key={context.name}\n                    href=\"/\"\n                    className={\n                      currentContext === context.name\n                        ? \"dropdown-item is-active\"\n                        : \"dropdown-item\"\n                    }\n                    onClick={event => {\n                      event.preventDefault();\n                      onChangeContext(context.name);\n                    }}\n                  >\n                    {context.name ? (\n                      <span>\n                        {context.name} ({context.count})\n                      </span>\n                    ) : (\n                      <i>Default ({context.count})</i>\n                    )}\n                  </a>\n                );\n              })}\n\n              <hr className=\"dropdown-divider\" />\n              {!this.state.addNew ? (\n                <a\n                  href=\"/\"\n                  className=\"dropdown-item\"\n                  onClick={event => {\n                    event.preventDefault();\n                    this.setState({ addNew: true }, () => {\n                      this.refs.newcontext.focus();\n                    });\n                  }}\n                >\n                  Create a new context\n                </a>\n              ) : (\n                <input\n                  type=\"text\"\n                  ref=\"newcontext\"\n                  className=\"input\"\n                  placeholder=\"My new context name\"\n                  onChange={event => {\n                    event.preventDefault();\n                  }}\n                  onBlur={event => {\n                    console.log(\"New input blurred\");\n                  }}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n","import React from \"react\";\n\nexport const ContextTag = ({ context, onClick }) => {\n  if (!context) {\n    return null;\n  }\n  return (\n    <span onClick={onClick} className=\"tag is-dark is-pulled-right\">\n      {context}\n    </span>\n  );\n};\n","// Auth0 / OIDC\nexport const OIDC_CLIENT_ID =\n  process.env.REACT_APP_OIDC_CLIENT_ID || \"R6R1t40cXQnuPQBdC8D83WOVyuUppZdw\";\nexport const OIDC_DOMAIN =\n  process.env.REACT_APP_OIDC_DOMAIN || \"peterbecom.auth0.com\";\nconst defaultCallbackUrl = `${window.location.protocol}//${\n  window.location.host\n}/`;\nexport const OIDC_CALLBACK_URL =\n  process.env.REACT_APP_OIDC_CALLBACK_URL || defaultCallbackUrl;\nexport const OIDC_AUDIENCE =\n  process.env.REACT_APP_OIDC_AUDIENCE || `https://${OIDC_DOMAIN}/userinfo`;\n\n// Kinto\nexport const KINTO_URL = process.env.REACT_APP_KINTO_URL || \"/v1\";\n","import { action, extendObservable, toJS } from \"mobx\";\nimport { KINTO_URL } from \"./Config\";\nimport Kinto from \"kinto\";\n\n// configure({ enforceActions: true });\n\n// We don't do the automatic periodic background sync if it was\n// recently done (due to user action).\nconst MIN_LAST_SYNC_AGE_MS = 2 * 1000;\nconst KEEP_SYNCING_INTERVAL_MS = 5 * 1000;\n\nconst MAX_SYNCLOGS_TO_KEEP = 30;\n\nclass TodoStore {\n  constructor(rootStore) {\n    this.rootStore = rootStore;\n\n    // this.db = new Kinto();\n    this.db = new Kinto({\n      adapterOptions: {\n        // Going from Kinto.js 11 to 12\n        migrateOldData: true\n      }\n    });\n    this.collection = this.db.collection(\"todos\");\n\n    extendObservable(this, {\n      items: [],\n      deletedItem: null,\n      editItem: null,\n      cleanSlateDate: null,\n      accessToken: null,\n      contextFilter: null,\n      syncLog: {\n        error: null,\n        lastSuccess: null,\n        lastFailure: null\n      },\n      syncLogs: [],\n      obtain: action(() => {\n        return this.collection.list({ order: \"-created\" }).then(res => {\n          this.items = res.data;\n        });\n      }),\n      keepSyncing: action(() => {\n        this.periodicSyncTimer = setTimeout(() => {\n          let lastAnything = 0;\n          if (this.syncLog.lastFailure) {\n            lastAnything = this.syncLog.lastFailure;\n          }\n          if (\n            this.syncLog.lastSuccess &&\n            this.syncLog.lastSuccess > lastAnything\n          ) {\n            lastAnything = this.syncLog.lastSuccess;\n          }\n          const lastSyncAge = new Date().getTime() - lastAnything;\n          // The only reason NOT to sync is if it was done recently.\n          if (lastSyncAge > MIN_LAST_SYNC_AGE_MS) {\n            this.sync();\n          } else {\n            console.warn(\n              \"Skipping periodic sync because it was done recently.\"\n            );\n          }\n          this.keepSyncing();\n        }, KEEP_SYNCING_INTERVAL_MS);\n      }),\n      lastModifiedSync: null,\n      sync: action(() => {\n        if (!this.accessToken) {\n          console.warn(\"No accessToken, no remote sync.\");\n          return;\n        }\n        const syncOptions = {\n          remote: KINTO_URL,\n          headers: {\n            Authorization: `Bearer ${this.accessToken}`\n          }\n        };\n\n        this.collection\n          .sync(syncOptions)\n          .then(data => {\n            if (data.lastModified !== this.lastModifiedSync) {\n              this.obtain();\n              this.lastModifiedSync = data.lastModified;\n            }\n\n            if (data.ok) {\n              this.syncLog.lastSuccess = new Date().getTime();\n            } else {\n              this.syncLog.lastFailure = new Date().getTime();\n            }\n            data._date = new Date();\n            this.syncLogs.push(data);\n            if (this.syncLogs.length >= MAX_SYNCLOGS_TO_KEEP) {\n              // Need to slice it down.\n              this.syncLogs = this.syncLogs.slice(\n                this.syncLogs.length - MAX_SYNCLOGS_TO_KEEP,\n                this.syncLogs.length\n              );\n            }\n\n            if (data.conflicts.length) {\n              console.warn(`There are ${data.conflicts.length} conflicts.`);\n              return Promise.all(\n                data.conflicts.map(conflict => {\n                  return this.collection.resolve(conflict, conflict.remote);\n                })\n              )\n                .then(() => {\n                  console.log(\"Conflicts successfully resolved.\");\n                  this.collection\n                    .sync(syncOptions)\n                    .then(() => {\n                      console.log(\n                        \"Server sync successful after conflict resolution.\"\n                      );\n                    })\n                    .catch(err => {\n                      console.log(\"Server sync failed.\", err);\n                    });\n                })\n                .catch(err => {\n                  console.warn(\"Attempt to resolve all conflicts failed.\", err);\n                  throw err;\n                });\n            }\n          })\n          .catch(error => {\n            console.warn(\"ERROR:\", error);\n            if (\n              error.message.includes(\n                \"Data provided to an operation does not meet requirements.\"\n              )\n            ) {\n              // XXX Debugging for https://github.com/peterbe/workon/issues/6\n              throw error;\n            }\n\n            if (error.message.includes(\"flushed\")) {\n              return this.collection.resetSyncStatus().then(_ => {\n                this.collection.sync();\n                alert(\"Server data flushed. Trying to refresh this page.\");\n                window.location.reload();\n              });\n            }\n            if (error.data && error.data.code && error.data.code === 401) {\n              // The access token is out-of-date\n              this.accessToken = null;\n            }\n            this.syncLog.error = error;\n            this.syncLog.lastFailure = new Date().getTime();\n          });\n      }),\n      selfDestruct: action(() => {\n        // XXX perhaps ask the user if all the remote\n        this.collection\n          .clear()\n          .then(() => {\n            this.items = [];\n            this.editItem = null;\n            this.deleteItem = null;\n            this.sync();\n            alert(\"It's all gone.\");\n          })\n          .catch(err => {\n            throw err;\n          });\n      }),\n      updateItem: action((item, text, notes, context) => {\n        const thisItemIndex = this.items.findIndex(i => i.id === item.id);\n        const thisItem = this.items[thisItemIndex];\n        thisItem.text = text;\n        thisItem.notes = notes;\n        thisItem.context = context;\n        thisItem.modified = new Date().getTime();\n        this.items[thisItemIndex] = thisItem;\n        this.collection\n          .update(this.cleanBeforeUpdating(thisItem))\n          .catch(err => {\n            throw err;\n          })\n          .then(() => {\n            this.sync();\n          });\n      }),\n      addItem: action(text => {\n        const now = new Date();\n        const item = {\n          text,\n          done: null,\n          created: now.getTime(),\n          modified: now.getTime()\n          // id: newId\n        };\n        this.collection\n          .create(item)\n          .then(res => {\n            item.id = res.data.id;\n            this.items.unshift(item);\n            this.sync();\n          })\n          .catch(err => {\n            throw err;\n          });\n      }),\n      importItem: action(item => {\n        this.collection\n          .create(item)\n          .then(res => {\n            item.id = res.data.id;\n            this.items.unshift(item);\n            // this.sync();\n          })\n          .catch(err => {\n            throw err;\n          });\n      }),\n      deleteItem: action(item => {\n        this.editItem = null;\n        const thisItemIndex = this.items.findIndex(i => i.id === item.id);\n        const thisItem = this.items[thisItemIndex];\n        if (thisItem.deleted) {\n          thisItem.deleted = null;\n          this.deletedItem = null;\n        } else {\n          thisItem.deleted = new Date().getTime();\n          this.deletedItem = item;\n        }\n        this.collection\n          .update(this.cleanBeforeUpdating(thisItem))\n          .then(res => {\n            this.items[thisItemIndex] = thisItem;\n            this.sync();\n          })\n          .catch(err => {\n            throw err;\n          });\n      }),\n      doneItem: action(item => {\n        const thisItemIndex = this.items.findIndex(i => i.id === item.id);\n        const thisItem = this.items[thisItemIndex];\n        if (thisItem.done) {\n          thisItem.done = null;\n        } else {\n          thisItem.done = new Date().getTime();\n        }\n        this.items[thisItemIndex] = thisItem;\n        this.editItem = null;\n        this.collection\n          .update(this.cleanBeforeUpdating(thisItem))\n          .then(() => {\n            this.sync();\n          })\n          .catch(err => {\n            throw err;\n          });\n      }),\n      togglePinnedItem: action(item => {\n        const thisItemIndex = this.items.findIndex(i => i.id === item.id);\n        const thisItem = this.items[thisItemIndex];\n        if (thisItem.pinned) {\n          thisItem.pinned = null;\n        } else {\n          thisItem.pinned = new Date().getTime();\n        }\n        this.items[thisItemIndex] = thisItem;\n        this.collection\n          .update(this.cleanBeforeUpdating(thisItem))\n          .then(() => {\n            this.sync();\n          })\n          .catch(err => {\n            throw err;\n          });\n      }),\n      cleanBeforeUpdating: item => {\n        const plain = toJS(item);\n        if (plain.last_modified) {\n          delete plain.last_modified;\n        }\n        return plain;\n      },\n      cleanSlate: action(() => {\n        // Mark all that are NOT hidden as hidden now.\n        const now = new Date().getTime();\n        this.items.forEach(item => {\n          if (!item.hidden && !item.pinned) {\n            item.hidden = now;\n            this.collection\n              .update(this.cleanBeforeUpdating(item))\n              .catch(err => {\n                throw err;\n              });\n          }\n        });\n        this.cleanSlateDate = now;\n        this.sync();\n      }),\n      undoCleanSlate: action(() => {\n        this.items.forEach(item => {\n          if (\n            item.hidden &&\n            ((this.cleanSlateDate && item.hidden === this.cleanSlateDate) ||\n              (!this.cleanSlateDate && item.hidden))\n          ) {\n            item.hidden = null;\n            this.collection\n              .update(this.cleanBeforeUpdating(item))\n              .catch(err => {\n                throw err;\n              });\n          }\n        });\n        this.cleanSlateDate = null;\n        this.sync();\n      }),\n      get allContextOptions() {\n        const all = {};\n        this.items.forEach(item => {\n          const context = item.context ? item.context : \"\";\n          if (!all[context]) {\n            all[context] = 0;\n          }\n          all[context]++;\n        });\n\n        return Object.entries(all)\n          .map(([key, value]) => {\n            return { name: key, count: value };\n          })\n          .sort((a, b) => {\n            if (a.name > b.name) return 1;\n            if (b.name > a.name) return -1;\n            return 0;\n          });\n      }\n    });\n  }\n}\n\nclass UserStore {\n  constructor(rootStore) {\n    this.rootStore = rootStore;\n    extendObservable(this, {\n      userInfo: null,\n      serverError: null\n    });\n  }\n}\n\nclass RootStore {\n  constructor() {\n    this.user = new UserStore(this);\n    this.todos = new TodoStore(this);\n  }\n}\n// import { decorate, observable } from \"mobx\"\n\nconst store = (window.store = new RootStore());\n// const store = (window.store = new TodoStore());\n\nexport default store;\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { Link } from \"react-router-dom\";\nimport play from \"audio-play\";\nimport load from \"audio-loader\";\nimport {\n  toDate,\n  isSameDay,\n  subDays,\n  startOfDay,\n  formatDistance,\n  formatDistanceStrict\n} from \"date-fns/esm\";\n\nimport EditModal from \"./EditModal\";\nimport { ContextTag } from \"./Common\";\n\nimport store from \"./Store\";\n\nconst SOUNDS = {\n  coin: \"./sounds/coin.mp3\",\n  bump: \"./sounds/bump.mp3\",\n  ping: \"./sounds/ping.mp3\",\n  smash: \"./sounds/smash.mp3\",\n  dead: \"./sounds/dead.mp3\",\n  jump: \"./sounds/jump.mp3\"\n};\n\nexport default observer(\n  class TodoList extends React.Component {\n    state = {\n      hideDone: JSON.parse(localStorage.getItem(\"hideDone\", \"false\")),\n      showPyros: false,\n      startInAdvancedMode: false\n    };\n\n    componentWillUnmount() {\n      this.dismounted = true;\n    }\n\n    componentDidMount() {\n      if (!sessionStorage.getItem(\"notFirstTime\")) {\n        // If it's the very first time you open this app, focus on the input.\n        this.refs.new.focus();\n      }\n      document.title = \"Things To Work On\";\n\n      const reg = /context=(.*)/;\n      if (window.location.hash && reg.test(window.location.hash)) {\n        const found = window.location.hash.match(reg)[1];\n        store.todos.contextFilter = decodeURIComponent(found);\n      }\n    }\n\n    _sounds = {};\n    _loadSound = name => {\n      if (this._sounds[name]) {\n        return Promise.resolve(this._sounds[name]);\n      }\n\n      return load(SOUNDS[name]).then(audioBuffer => {\n        this._sounds[name] = audioBuffer;\n        return audioBuffer;\n      });\n    };\n\n    playSound = name => {\n      if (!SOUNDS[name]) {\n        throw new Error(`Unrecognized sound '${name}'.`);\n      }\n      this._loadSound(name).then(() => {\n        play(this._sounds[name]);\n      });\n    };\n\n    itemFormSubmit = event => {\n      event.preventDefault();\n      const text = this.refs.new.value.trim();\n      if (text) {\n        store.todos.addItem(text);\n        this.refs.new.value = \"\";\n        this.playSound(\"ping\");\n      }\n    };\n\n    showPyrosTemporarily = (mseconds = 5000) => {\n      this.setState({ showPyros: true }, () => {\n        window.setTimeout(() => {\n          if (!this.dismounted) {\n            this.setState({ showPyros: false });\n          }\n        }, mseconds);\n      });\n    };\n\n    doneItem = item => {\n      const wasNotDone = !item.done;\n      store.todos.doneItem(item);\n      if (wasNotDone) {\n        this.playSound(\"coin\");\n        this.showPyrosTemporarily();\n      } else {\n        this.playSound(\"bump\");\n      }\n    };\n\n    deleteItem = item => {\n      store.todos.deleteItem(item);\n      this.playSound(\"smash\");\n      if (this.giveupUndoTimeout) {\n        window.clearTimeout(this.giveupUndoTimeout);\n      }\n      this.giveupUndoTimeout = window.setTimeout(() => {\n        if (!this.dismounted) {\n          if (store.todos.deletedItem) {\n            store.todos.deletedItem = null;\n          }\n        }\n      }, 10 * 1000);\n    };\n\n    undoDelete = () => {\n      // store.todos.undoDelete();\n      // console.log(\"UNDO DELETE ON\", store.todos.deletedItem);\n      store.todos.deleteItem(store.todos.deletedItem);\n      this.playSound(\"ping\");\n    };\n\n    undoCleanSlate = event => {\n      store.todos.undoCleanSlate();\n      this.playSound(\"dead\");\n    };\n\n    cleanSlate = even => {\n      store.todos.cleanSlate();\n      this.playSound(\"jump\");\n    };\n\n    updateItem = (item, text, notes, context) => {\n      store.todos.updateItem(item, text, notes, context);\n    };\n\n    // editItemContext = (context, item) => {\n    //   store.todos.editItemContext(item, context);\n    // };\n\n    toggleEditItem = (item = null, advancedMode = false) => {\n      this.setState({ startInAdvancedMode: advancedMode }, () => {\n        store.todos.editItem = item;\n      });\n    };\n\n    togglePinnedItem = item => {\n      store.todos.togglePinnedItem(item);\n      // console.warn(\"TOGGLE PINNED!\", item);\n    };\n\n    toggleHideDone = event => {\n      this.setState({ hideDone: !this.state.hideDone }, () => {\n        localStorage.setItem(\"hideDone\", JSON.stringify(this.state.hideDone));\n      });\n    };\n\n    render() {\n      const allContexts = {\n        \"\": 0\n      };\n      store.todos.items.forEach(item => {\n        if (item.context) {\n          const context = item.context || \"\";\n          if (!allContexts[context]) {\n            allContexts[context] = 0;\n          }\n          allContexts[context]++;\n        }\n        allContexts[\"\"]++;\n      });\n      const allContextKeys = Object.keys(allContexts).sort();\n      const items = store.todos.items.filter(item => {\n        if (\n          store.todos.contextFilter &&\n          item.context !== store.todos.contextFilter\n        ) {\n          return false;\n        }\n        return !item.deleted;\n      });\n      const visibleItems = items.filter(item => !item.hidden);\n      const showItems = visibleItems.filter(item => {\n        if (this.state.hideDone) {\n          return !item.done;\n        }\n        return true;\n      });\n      const countDone = visibleItems.filter(item => item.done).length;\n      const countAll = items.length;\n      const countVisible = visibleItems.length;\n      const allDates = visibleItems.map(item => item.created);\n\n      return (\n        <div>\n          <h1>Things To Work On</h1>\n\n          {this.state.showPyros ? (\n            <div className=\"pyro\">\n              <div className=\"before\" />\n              <div className=\"after\" />\n            </div>\n          ) : null}\n\n          {store.todos.deletedItem ? (\n            <div className=\"notification is-warning undo-notification\">\n              {/* <button\n                className=\"delete\"\n                onClick={event => {\n                  store.todos.deletedItem = null;\n                }}\n              /> */}\n              <button className=\"button is-primary\" onClick={this.undoDelete}>\n                Undo Delete\n              </button>{\" \"}\n              <button\n                className=\"button is-small\"\n                onClick={event => {\n                  store.todos.deletedItem = null;\n                }}\n              >\n                Close\n              </button>\n            </div>\n          ) : null}\n\n          {store.todos.cleanSlateDate ? (\n            <div className=\"notification is-warning  undo-notification\">\n              <button\n                className=\"delete\"\n                onClick={event => {\n                  store.todos.cleanSlateDate = null;\n                }}\n              />\n              <button\n                className=\"button is-primary\"\n                onClick={this.undoCleanSlate}\n              >\n                Undo Clean Slate?\n              </button>{\" \"}\n              <button\n                className=\"button is-small\"\n                onClick={event => {\n                  store.todos.cleanSlateDate = null;\n                }}\n              >\n                Close\n              </button>\n            </div>\n          ) : null}\n\n          {store.todos.editItem ? (\n            <EditModal\n              item={store.todos.editItem}\n              edit={this.updateItem}\n              close={this.toggleEditItem}\n              delete={this.deleteItem}\n              done={this.doneItem}\n              allContextOptions={store.todos.allContextOptions}\n              startInAdvancedMode={this.state.startInAdvancedMode}\n            />\n          ) : null}\n\n          <div className=\"list-container\">\n            <form onSubmit={this.itemFormSubmit}>\n              <input\n                className=\"input add-item\"\n                type=\"text\"\n                ref=\"new\"\n                placeholder=\"What's next?\"\n              />\n            </form>\n            {allContextKeys.length > 1 ? (\n              <div className=\"tabs is-small\">\n                <ul>\n                  {allContextKeys.map(context => {\n                    return (\n                      <li\n                        key={context}\n                        className={\n                          store.todos.contextFilter === context ||\n                          (!store.todos.contextFilter && !context)\n                            ? \"is-active\"\n                            : null\n                        }\n                      >\n                        <a\n                          href={`#context=${context}`}\n                          onClick={event => {\n                            event.preventDefault();\n                            if (context) {\n                              store.todos.contextFilter = context;\n                              window.location.hash = `#context=${context}`;\n                            } else {\n                              store.todos.contextFilter = null;\n                              window.location.hash = \"\";\n                            }\n                          }}\n                        >\n                          {context ? context : \"All\"} ({allContexts[context]})\n                          {/* <span className=\"tag is-dark\">\n                            {context ? context : \"All\"}\n                          </span> */}\n                        </a>\n                      </li>\n                    );\n                  })}\n                </ul>\n              </div>\n            ) : null}\n            <div className=\"list-container-inner\">\n              <TransitionGroup>\n                {showItems.map(item => (\n                  <CSSTransition\n                    key={item.id || item.created}\n                    timeout={300}\n                    classNames=\"fade\"\n                  >\n                    {/* Is this (below) key= needed? */}\n                    <Item\n                      item={item}\n                      allDates={allDates}\n                      deleteItem={this.deleteItem}\n                      doneItem={this.doneItem}\n                      editItemText={this.editItemText}\n                      setEditItem={this.toggleEditItem}\n                      togglePinnedItem={this.togglePinnedItem}\n                    />\n                  </CSSTransition>\n                ))}\n              </TransitionGroup>\n            </div>\n          </div>\n\n          {showItems.length ? (\n            <div className=\"columns buttons\">\n              <div className=\"column\">\n                <button\n                  className=\"button is-info is-fullwidth\"\n                  onClick={this.cleanSlate}\n                >\n                  Clean Slate\n                </button>\n              </div>\n              <div className=\"column\">\n                <button\n                  className=\"button is-info is-fullwidth\"\n                  onClick={this.toggleHideDone}\n                >\n                  {this.state.hideDone\n                    ? `Show Done Items (${countDone})`\n                    : `Hide Done Items (${countDone})`}\n                </button>\n              </div>\n            </div>\n          ) : (\n            <p className=\"freshness-blurb\">\n              Ahhhhh! The freshness of starting afresh!\n            </p>\n          )}\n\n          {countAll > countVisible ? (\n            <p>\n              <button\n                className=\"button is-mini is-fullwidth\"\n                onClick={event => {\n                  store.todos.undoCleanSlate();\n                }}\n              >\n                Show all ({countAll - countVisible}) hidden items\n              </button>\n            </p>\n          ) : null}\n\n          <ShowSyncLog syncLog={store.todos.syncLog} />\n        </div>\n      );\n    }\n  }\n);\n\nconst ShowSyncLog = observer(\n  class ShowSyncLog extends React.Component {\n    subRender = syncLog => {\n      if (!(syncLog.lastSuccess || syncLog.lastFailure)) {\n        return (\n          <Link\n            to=\"/auth\"\n            title=\"Authenticate to enable backup\"\n            className=\"has-text-warning\"\n          >\n            Data <i>not</i> backed up.\n          </Link>\n        );\n      } else if (\n        (syncLog.lastSuccess && !syncLog.lastFailure) ||\n        syncLog.lastSuccess > syncLog.lastFailure\n      ) {\n        return (\n          <Link to=\"/synclog\" className=\"has-text-success\">\n            Data backed up{\" \"}\n            {formatDistance(syncLog.lastSuccess, new Date(), {\n              addSuffix: true\n            })}\n            .\n          </Link>\n        );\n      } else if (\n        (syncLog.lastFailure && !syncLog.lastSuccess) ||\n        syncLog.lastFailure > syncLog.lastSuccess\n      ) {\n        return (\n          <Link to=\"/synclog\" className=\"has-text-danger\">\n            Last data backed-up failed{\" \"}\n            {formatDistance(syncLog.lastFailure, new Date(), {\n              addSuffix: true\n            })}\n            .\n          </Link>\n        );\n      }\n      return <small>{JSON.stringify(store.todos.syncLog)}</small>;\n    };\n    render() {\n      return (\n        <p className=\"has-text-centered sync-log-summary\">\n          {this.subRender(store.todos.syncLog)}\n        </p>\n      );\n    }\n  }\n);\n\nconst Item = observer(\n  class Item extends React.Component {\n    state = {\n      displayMetadata: false,\n      editMode: false,\n      newText: null\n    };\n\n    toggleEditMode = event => {\n      if (this.state.newText === null) {\n        this.setState({ newText: this.props.item.text });\n      }\n      this.setState({ editMode: !this.state.editMode }, () => {\n        if (this.state.editMode) {\n          this.refs.text.focus();\n        } else {\n          // Time to save!\n          this.props.editItemText(this.state.newText, this.props.item);\n        }\n      });\n    };\n    handleTextEdit = event => {\n      this.setState({ newText: event.target.value });\n    };\n\n    _swipe = {};\n    minSwipeDistance = 100;\n\n    handleTouchStart = event => {\n      const touch = event.touches[0];\n      this._swipe.x = touch.clientX;\n      this._swipe.y = touch.clientY;\n      this.refs.textcontainer.style[\"white-space\"] = \"nowrap\";\n      this.refs.textcontainer.style[\"overflow\"] = \"overlay\";\n    };\n    handleTouchMove = event => {\n      if (event.changedTouches && event.changedTouches.length) {\n        const touch = event.changedTouches[0];\n        const diffX = touch.clientX - this._swipe.x;\n        const diffY = touch.clientY - this._swipe.y;\n\n        // Don't engage in swiping-with-css unless the finger is just \"wobbly\"\n        if (\n          this._swipe.engaged ||\n          (Math.abs(diffX) > 10 && Math.abs(diffX) > Math.abs(diffY))\n        ) {\n          this._swipe.swiping = true;\n          this._swipe.engaged = true;\n          this.refs.textcontainer.style[\"margin-left\"] = `${diffX}px`;\n          if (Math.abs(diffX) > 150) {\n            this.refs.textcontainer.classList.remove(\"shake-little\");\n            this.refs.textcontainer.classList.remove(\"shake\");\n            this.refs.textcontainer.classList.add(\"shake-hard\");\n          } else if (Math.abs(diffX) > 50) {\n            this.refs.textcontainer.classList.remove(\"shake-little\");\n            this.refs.textcontainer.classList.add(\"shake\");\n            this.refs.textcontainer.classList.remove(\"shake-hard\");\n          } else {\n            this.refs.textcontainer.classList.add(\"shake-little\");\n            this.refs.textcontainer.classList.remove(\"shake\");\n            this.refs.textcontainer.classList.remove(\"shake-hard\");\n          }\n          // console.log(diffX);\n\n          // console.log(this.refs.textcontainer.classList);\n        }\n      }\n    };\n    handleTouchEnd = event => {\n      const touch = event.changedTouches[0];\n      const diffX = touch.clientX - this._swipe.x;\n      const absX = Math.abs(diffX);\n      if (this._swipe.swiping && absX > this.minSwipeDistance) {\n        if (diffX < 0) {\n          this.props.deleteItem(this.props.item);\n        } else {\n          this.props.doneItem(this.props.item);\n        }\n      }\n      this._swipe = {};\n      this.refs.textcontainer.style[\"margin-left\"] = \"0\";\n      this.refs.textcontainer.style[\"white-space\"] = \"normal\";\n      this.refs.textcontainer.style[\"overflow\"] = \"unset\";\n      this.refs.textcontainer.classList.remove(\"shake-little\");\n      this.refs.textcontainer.classList.remove(\"shake\");\n      this.refs.textcontainer.classList.remove(\"shake-hard\");\n    };\n\n    render() {\n      const { item } = this.props;\n      const createdDateObj = toDate(item.created);\n      const modifiedDateObj = toDate(item.modified);\n      let itemClassName = \"\";\n      if (item.done) {\n        itemClassName = \"strikeout\";\n      }\n\n      return (\n        <div\n          className=\"item\"\n          title={\n            item.created === item.modified\n              ? `Added ${createdDateObj}`\n              : `Added ${modifiedDateObj}`\n          }\n        >\n          <FriendlyDateTag datetime={item.created} />\n          <PinItemTag\n            pinned={item.pinned}\n            toggle={() => {\n              this.props.togglePinnedItem(item);\n            }}\n          />\n          <ContextTag\n            context={item.context}\n            onClick={event => {\n              event.preventDefault();\n              this.props.setEditItem(item, true);\n            }}\n          />\n          <p\n            className={itemClassName}\n            title=\"Click to edit\"\n            style={{ cursor: \"pointer\" }}\n            onClick={event => {\n              this.props.setEditItem(item);\n            }}\n            ref=\"textcontainer\"\n            onTouchStart={this.handleTouchStart}\n            onTouchMove={this.handleTouchMove}\n            onTouchEnd={this.handleTouchEnd}\n          >\n            {/* <Linkify\n            properties={{\n              target: \"_blank\"\n              // onClick: event => {\n              //   event.preventDefault();\n              //   console.log('EVENT',event);\n              //   console.log('TARGET', event.target);\n              // }\n            }}\n          >\n            {item.text}\n          </Linkify> */}\n            {item.text}\n          </p>\n          {item.notes ? (\n            <p className=\"metadata item-notes\">\n              <b>notes: </b>\n              {/* <Linkify\n              properties={{\n                target: \"_blank\"\n              }}\n            >\n              {item.notes}\n            </Linkify> */}\n              {item.notes}\n            </p>\n          ) : null}\n        </div>\n      );\n    }\n  }\n);\n\nconst FriendlyDateTag = ({ datetime }) => {\n  const now = new Date();\n  let text;\n  if (isSameDay(now, datetime)) {\n    text = \"Today\";\n  } else if (isSameDay(datetime, subDays(now, 1))) {\n    text = \"Yesterday\";\n    // } else if (dateFns.isSameDay(datetime, dateFns.addDays(now, 1))) {\n    //   text = \"Tomorrow\";\n  } else {\n    text = formatDistanceStrict(datetime, startOfDay(now), {\n      addSuffix: true\n    });\n  }\n\n  return <span className=\"tag is-white is-pulled-right\">{text}</span>;\n};\n\nfunction PinItemTag({ pinned, toggle }) {\n  return (\n    <a\n      href=\"/\"\n      className=\"tag is-white is-pulled-right pin-toggle\"\n      title=\"Pinned items don't disappear when make a clean slate\"\n      onClick={event => {\n        event.preventDefault();\n        toggle();\n      }}\n    >\n      {pinned ? \"Pinned\" : \"Pin?\"}\n    </a>\n  );\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport store from \"./Store\";\nimport \"bulma-timeline/dist/css/bulma-timeline.min.css\";\n\nimport {\n  format,\n  isSameDay,\n  subDays,\n  startOfDay,\n  startOfMonth,\n  isEqual\n} from \"date-fns/esm\";\n\nconst TimeLine = observer(\n  class TimeLine extends React.Component {\n    componentDidMount() {\n      document.title = \"Things Done\";\n    }\n\n    componentWillUnmount() {\n      this.dismounted = true;\n    }\n\n    render() {\n      const doneItems = store.todos.items.filter(item => item.done);\n      const groups = {};\n      doneItems.reverse().forEach(item => {\n        const date = startOfDay(item.done).getTime();\n        if (!groups[date]) {\n          groups[date] = [];\n        }\n        groups[date].push(item);\n      });\n      const dates = Object.keys(groups).map(d => parseInt(d, 10));\n      dates.sort((a, b) => a - b);\n      let previousMonth = null;\n      return (\n        <div>\n          <h1>Things Done</h1>\n          <div className=\"timeline\">\n            <header className=\"timeline-header\">\n              <span className=\"tag is-medium is-primary\">Start</span>\n            </header>\n            <div className=\"timeline-item\">\n              <div className=\"timeline-content\" />\n            </div>\n            {dates.map(date => {\n              const items = groups[date];\n              const month = startOfMonth(date);\n              let monthHeader = null;\n              if (!previousMonth || !isEqual(month, previousMonth)) {\n                monthHeader = (\n                  <header className=\"timeline-header\" key={month}>\n                    <span className=\"tag is-primary\">\n                      {format(month, \"MMM\")}\n                    </span>\n                  </header>\n                );\n              }\n              previousMonth = month;\n              return [\n                monthHeader,\n                <div className=\"timeline-item\" key={date}>\n                  <div className=\"timeline-marker\" />\n                  <div className=\"timeline-content\">\n                    <p className=\"heading\">{FriendlyDate(date)}</p>\n                    {items.map(item => <p key={item.id}>{item.text}</p>)}\n                  </div>\n                </div>\n              ];\n            })}\n            <div className=\"timeline-header\">\n              <span className=\"tag is-medium is-primary\">End</span>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n);\n\nexport default TimeLine;\n\nconst FriendlyDate = datetime => {\n  const now = new Date();\n  let text;\n  if (isSameDay(now, datetime)) {\n    text = \"Today\";\n  } else if (isSameDay(datetime, subDays(now, 1))) {\n    text = \"Yesterday\";\n  } else {\n    text = format(datetime, \"D MMM YYYY\");\n  }\n  return text;\n};\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\n\nimport store from \"./Store\";\n\nconst Auth = observer(\n  class Auth extends React.Component {\n    pageTitle = \"Authentication\";\n    componentDidMount() {\n      document.title = this.pageTitle; // XXX Use helmet\n    }\n\n    componentWillUnmount() {\n      this.dismounted = true;\n    }\n\n    render() {\n      return (\n        <div>\n          <h1>{this.pageTitle}</h1>\n\n          {store.user.serverError ? (\n            <ShowServerError\n              error={store.user.serverError}\n              close={event => {\n                store.user.serverError = null;\n              }}\n            />\n          ) : null}\n\n          <p style={{ textAlign: \"center\" }}>\n            {store.user.userInfo ? (\n              <button\n                className=\"button is-large is-warning\"\n                onClick={this.props.logOut}\n              >\n                Log Out\n              </button>\n            ) : (\n              <button\n                className=\"button is-large is-primary\"\n                onClick={this.props.logIn}\n              >\n                Log In\n              </button>\n            )}\n          </p>\n\n          {store.user.userInfo ? (\n            <div className=\"box\">\n              <h2>\n                Logged in as: <code>{store.user.userInfo.email}</code>\n              </h2>\n            </div>\n          ) : null}\n        </div>\n      );\n    }\n  }\n);\n\nexport default Auth;\n\nfunction ShowServerError({ close, error }) {\n  return (\n    <div className=\"notification is-warning\" style={{ margin: 30 }}>\n      <button className=\"delete\" onClick={close} />\n      <p>\n        <b>Authentication Server Error</b>\n      </p>\n      <p>\n        Tried to authenticate (or fetch authentication information) and it\n        failed due to a server error.\n      </p>\n      {error.status ? (\n        <p>\n          Status code <code>{error.status}</code>\n        </p>\n      ) : (\n        <pre>{JSON.stringify(error)}</pre>\n      )}\n    </div>\n  );\n}\n","import { formatDistance } from \"date-fns/esm\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\n\nimport store from \"./Store\";\n\nconst Settings = observer(\n  class Settings extends React.Component {\n    state = {};\n    pageTitle = \"Settings\";\n    componentDidMount() {\n      document.title = this.pageTitle; // XXX Use helmet\n    }\n\n    componentWillUnmount() {\n      this.dismounted = true;\n    }\n\n    getVersionData = () => {\n      const element = document.querySelector(\"#_version\");\n      return Object.assign({}, element.dataset);\n    };\n\n    render() {\n      const data = this.getVersionData();\n\n      return (\n        <div>\n          <h1>{this.pageTitle}</h1>\n          <DeleteItAll />\n\n          <p style={{ textAlign: \"center\" }}>\n            Current version:{\" \"}\n            <a\n              href={`https://github.com/peterbe/workon/commit/${data.commit}`}\n              title={data.date}\n            >\n              {data.commit.slice(0, 7)}\n            </a>{\" \"}\n            <small>\n              (\n              {formatDistance(data.date, new Date(), {\n                addSuffix: true\n              })}\n              )\n            </small>{\" \"}\n            <a\n              href=\"https://whatsdeployed.io/s/58R\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              Whatsdeployed?\n            </a>\n          </p>\n        </div>\n      );\n    }\n  }\n);\n\nexport default Settings;\n\nfunction DeleteItAll() {\n  const [confirm, setConfirm] = React.useState(false);\n\n  return (\n    <div className=\"box\">\n      {confirm ? (\n        <h4 className=\"has-text-centered\">\n          This will delete all items forever.\n        </h4>\n      ) : null}\n      <button\n        className={\n          confirm\n            ? \"button is-danger is-fullwidth\"\n            : \"button is-warning is-fullwidth\"\n        }\n        onClick={event => {\n          if (confirm) {\n            store.todos.selfDestruct();\n            setConfirm(false);\n          } else {\n            setConfirm(true);\n          }\n        }}\n        type=\"button\"\n      >\n        {confirm ? \"Are you certain?\" : \"Delete it All!\"}\n      </button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { format, formatDistance } from \"date-fns/esm\";\n\nimport store from \"./Store\";\n\nconst SyncLog = observer(\n  class SyncLog extends React.Component {\n    state = {};\n    pageTitle = \"Sync Log\";\n    componentDidMount() {\n      document.title = this.pageTitle; // XXX Use helmet\n    }\n\n    componentWillUnmount() {\n      this.dismounted = true;\n    }\n\n    render() {\n      return (\n        <div>\n          <h1 className=\"title\">{this.pageTitle}</h1>\n          <ListAll items={store.todos.syncLogs} />\n        </div>\n      );\n    }\n  }\n);\n\nexport default SyncLog;\n\nconst ListAll = React.memo(({ items }) => {\n  if (!items.length) {\n    return <div>Nothing yet</div>;\n  }\n  return (\n    <div>\n      <h2 className=\"title\">{items.length} Sync Attempts</h2>\n      {items.map((data, i) => (\n        <Log key={data._date} data={data} first={!i} />\n      ))}\n    </div>\n  );\n});\n\nclass Log extends React.PureComponent {\n  state = {\n    expand: this.props.first\n  };\n  render() {\n    const data = Object.assign({}, this.props.data);\n    const preStyle = {\n      fontSize: \"80%\"\n    };\n    if (!this.state.expand) {\n      preStyle.maxHeight = 100;\n      preStyle.borderBottom = \"1px dashed rgb(140, 140, 140)\";\n    }\n    const date = data._date;\n    delete data._date;\n    return (\n      <div\n        className=\"synclog-item\"\n        style={{\n          marginTop: 15,\n          paddingTop: 10,\n          borderTop: \"1px solid #ccc\"\n        }}\n      >\n        <h4\n          className={\n            data.ok\n              ? \"title is-4 has-text-success\"\n              : \"title is-4 has-text-danger\"\n          }\n          style={{ marginBottom: 2 }}\n        >\n          {data.ok ? \"OK\" : \"Not OK\"}\n        </h4>\n        <small>\n          Date:{\" \"}\n          <b>\n            {format(date, \"PPPPpppp\")} (\n            {formatDistance(date, new Date(), {\n              addSuffix: true\n            })}\n            )\n          </b>\n        </small>\n        <pre\n          style={preStyle}\n          onClick={event => {\n            this.setState({ expand: !this.state.expand });\n          }}\n        >\n          {JSON.stringify(data, null, 2)}\n        </pre>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch, Link } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport \"bulma/css/bulma.css\";\nimport \"bulma-badge/dist/css/bulma-badge.min.css\";\nimport \"csshake/dist/csshake.css\";\nimport TodoList from \"./TodoList\";\nimport TimeLine from \"./TimeLine\";\nimport Auth from \"./Auth\";\nimport Settings from \"./Settings\";\nimport SyncLog from \"./SyncLog\";\n\nimport \"./App.css\";\nimport \"./Pyro.css\";\nimport auth0 from \"auth0-js\";\nimport Loadable from \"react-loading-overlay\";\n\nimport {\n  OIDC_DOMAIN,\n  OIDC_CLIENT_ID,\n  OIDC_CALLBACK_URL,\n  OIDC_AUDIENCE\n} from \"./Config\";\n\nimport { formatDistance } from \"date-fns/esm\";\n\nimport store from \"./Store\";\n\n// Hacky solution to make it possible to manually pretend that the\n// access token is about to expire.\n// In the Web Console, type in something like `windExpires(23.5)` and\n// it will make it so that the access token is going to 23.5h sooner\n// than now.\nwindow.windExpires = function(hours) {\n  let e = JSON.parse(localStorage.expiresAt);\n  e -= 1000 * 60 * 60 * hours;\n  localStorage.setItem(\"expiresAt\", e);\n};\n\nconst NoMatch = ({ location }) => (\n  <div>\n    <h3>\n      No match for <code>{location.pathname}</code>\n    </h3>\n  </div>\n);\n\nconst App = observer(\n  class App extends React.Component {\n    state = {\n      loading: !sessionStorage.getItem(\"notFirstTime\")\n    };\n    componentDidMount() {\n      if (this.state.loading) {\n        this.stopLoadingTimer = window.setTimeout(() => {\n          this.setState({ loading: false });\n        }, 1500);\n      }\n      sessionStorage.setItem(\"notFirstTime\", true);\n\n      store.todos.obtain();\n\n      this.authenticate();\n    }\n\n    componentWillUnmount() {\n      this.dismounted = true;\n      if (this.pullToRefresh) {\n        this.pullToRefresh.destroyAll();\n      }\n    }\n\n    // Sign in either by localStorage or by window.location.hash\n    authenticate() {\n      this.webAuth = new auth0.WebAuth({\n        domain: OIDC_DOMAIN,\n        clientID: OIDC_CLIENT_ID,\n        redirectUri: OIDC_CALLBACK_URL,\n        audience: OIDC_AUDIENCE,\n        responseType: \"token id_token\",\n        scope: \"openid profile email\"\n      });\n\n      this.webAuth.parseHash({}, (err, authResult) => {\n        if (err) {\n          return console.error(err);\n        }\n\n        if (authResult && window.location.hash) {\n          window.location.hash = \"\";\n        }\n\n        let startAccessTokenRefreshLoop = !!authResult;\n\n        if (!authResult) {\n          authResult = JSON.parse(localStorage.getItem(\"authResult\"));\n          if (authResult) {\n            startAccessTokenRefreshLoop = true;\n          }\n          const expiresAt = JSON.parse(localStorage.getItem(\"expiresAt\"));\n          if (expiresAt && expiresAt - new Date().getTime() < 0) {\n            // Oh no! It has expired.\n            authResult = null;\n          }\n        }\n        if (authResult) {\n          // The contents of authResult depend on which authentication parameters were used.\n          // It can include the following:\n          // authResult.accessToken - access token for the API specified by `audience`\n          // authResult.expiresIn - string with the access token's expiration time in seconds\n          // authResult.idToken - ID token JWT containing user profile information\n          this._postProcessAuthResult(authResult);\n        }\n        if (startAccessTokenRefreshLoop) {\n          this.accessTokenRefreshLoop();\n        }\n      });\n    }\n\n    _postProcessAuthResult = authResult => {\n      if (authResult) {\n        store.user.userInfo = authResult.idTokenPayload;\n        store.todos.accessToken = authResult.accessToken;\n        store.todos.sync();\n        store.todos.keepSyncing();\n\n        const expiresAt = authResult.expiresIn * 1000 + new Date().getTime();\n        if (authResult.state) {\n          // XXX we could use authResult.state to redirect to where you\n          // came from.\n          delete authResult.state;\n        }\n        localStorage.setItem(\"authResult\", JSON.stringify(authResult));\n        localStorage.setItem(\"expiresAt\", JSON.stringify(expiresAt));\n      }\n    };\n\n    accessTokenRefreshLoop = () => {\n      // Return true if the access token has expired (or is about to expire)\n      const expiresAt = JSON.parse(localStorage.getItem(\"expiresAt\"));\n      // 'age' in milliseconds\n      let age = expiresAt - new Date().getTime();\n      console.log(\n        \"accessToken expires in\",\n        formatDistance(expiresAt, new Date())\n      );\n      // Consider the accessToken to be expired if it's about to expire\n      // in 30 minutes.\n      age -= 30 * 60 * 1000;\n      const timeToRefresh = age < 0;\n\n      if (timeToRefresh) {\n        console.warn(\"Time to fresh the auth token!\");\n        this.webAuth.checkSession({}, (err, authResult) => {\n          if (err) {\n            if (err.error === \"login_required\") {\n              console.warn(\"Error in checkSession requires a new login\");\n              return this.logIn();\n            } else {\n              console.warn(\"Error trying to checkSession\");\n              return console.error(err);\n            }\n          }\n          this._postProcessAuthResult(authResult);\n        });\n      } else {\n        window.setTimeout(() => {\n          if (!this.dismounted) {\n            this.accessTokenRefreshLoop();\n          }\n        }, 5 * 60 * 1000);\n        // }, 10 * 1000);\n      }\n    };\n\n    logIn = () => {\n      this.webAuth.authorize({\n        // state: returnUrl,\n        state: \"\"\n      });\n    };\n\n    logOut = () => {\n      localStorage.removeItem(\"expiresAt\");\n      localStorage.removeItem(\"authResult\");\n      localStorage.removeItem(\"userInfo\");\n      const rootUrl = `${window.location.protocol}//${window.location.host}/`;\n      this.webAuth.logout({\n        returnTo: rootUrl,\n        clientID: OIDC_CLIENT_ID\n      });\n    };\n\n    render() {\n      return (\n        <Router>\n          <Loadable\n            active={this.state.loading}\n            spinner\n            background=\"rgba(256, 256, 256, 0.92)\"\n            color=\"#000\"\n            spinnerSize=\"140px\"\n            text=\"Loading the app...\"\n          >\n            <div className=\"container\">\n              <div className=\"box\">\n                {store.user.userInfo ? (\n                  <Link to=\"auth\">\n                    <figure\n                      className=\"image is-32x32 is-pulled-right avatar\"\n                      title={`Logged in as ${store.user.userInfo.name}, ${\n                        store.user.userInfo.email\n                      }`}\n                    >\n                      <img src={store.user.userInfo.picture} alt=\"Avatar\" />\n                    </figure>\n                  </Link>\n                ) : null}\n\n                <Switch>\n                  <Route path=\"/\" exact component={TodoList} />\n                  <Route path=\"/timeline\" exact component={TimeLine} />\n                  <Route\n                    path=\"/auth\"\n                    exact\n                    render={props => (\n                      <Auth\n                        {...props}\n                        logIn={this.logIn}\n                        logOut={this.logOut}\n                      />\n                    )}\n                  />\n                  <Route path=\"/settings\" exact component={Settings} />\n                  <Route path=\"/synclog\" exact component={SyncLog} />\n                  <Route component={NoMatch} />\n                </Switch>\n                <nav\n                  className=\"breadcrumb is-centered has-bullet-separator\"\n                  aria-label=\"breadcrumbs\"\n                  style={{\n                    marginTop: 30,\n                    paddingTop: 10\n                  }}\n                >\n                  <ul>\n                    <li>\n                      <Link to=\"/\">Home</Link>\n                    </li>\n                    <li>\n                      <Link to=\"/timeline\">Time Line</Link>\n                    </li>\n                    <li>\n                      <Link to=\"/auth\">\n                        <AuthLinkText\n                          serverError={store.user.serverError}\n                          userInfo={store.user.userInfo}\n                        />\n                      </Link>\n                      {/* <Link to=\"/auth\">Authentication</Link> */}\n                    </li>\n                    <li>\n                      <Link to=\"/settings\">Settings</Link>\n                    </li>\n                  </ul>\n                </nav>\n              </div>\n            </div>\n          </Loadable>\n        </Router>\n      );\n    }\n  }\n);\n\nexport default App;\n\nconst AuthLinkText = React.memo(({ serverError, userInfo }) => {\n  let className = \"has-badge-small has-badge-rounded\";\n  let data = \"\";\n  let title = \"\";\n  if (serverError) {\n    className += \" has-badge-danger\";\n    data = \"!\";\n    title = \"Authentication failed because of a server error\";\n  } else if (userInfo) {\n    className += \" has-badge-success\";\n    title = `Logged in as ${store.user.userInfo.name}, ${\n      store.user.userInfo.email\n    }`;\n  } else {\n    className += \" has-badge-warning\";\n    title = \"You are not logged in so no remote backups can be made.\";\n  }\n  return (\n    <span className={className} data-badge={data} title={title}>\n      Authentication\n    </span>\n  );\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { toast } from \"bulma-toast\";\nimport \"./index.css\";\nimport \"./font-face.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\nserviceWorker.register({\n  onUpdate: registration => {\n    // XXX I don't think it's enough to reload the page\n    // because the user has to actually close all tabs first.\n    // You need to 'registration.waiting.postMessage(\"skipWaiting\");'\n    // followed by a reload.\n    toast({\n      message: \"New version available if you refresh the page.\",\n      type: \"is-info\",\n      dismissible: true,\n      closeOnClick: false,\n      pauseOnHover: true,\n      duration: 20000\n    });\n    // window.location.reload();\n  }\n});\n"],"sourceRoot":""}